"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[390],{7390:(q,p,r)=>{r.r(p),r.d(p,{SeriesModule:()=>Q});var a=r(6895),d=r(433),c=r(8902),e=r(8256),g=r(6279),_=r(4387),u=r(5982),C=r(7886),v=r(7005),x=r(2722);function S(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",14),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onRemove())}),e._uU(1,"L\xf6schen"),e.qZA()}}const h=function(i){return{disabled:i}},M=function(i){return{errors:i}},m=function(i){return{error:i}};function w(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",1)(2,"div",2),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.reload())}),e._uU(3,"Verwerfen"),e.qZA(),e.TgZ(4,"div",3),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onSave())}),e._uU(5," Speichern "),e.qZA(),e.YNc(6,S,2,0,"div",4),e.qZA(),e.TgZ(7,"div",5)(8,"div",6)(9,"label"),e._uU(10,"\xdcbergeordnete Ablage"),e.qZA(),e.TgZ(11,"semantic-single-select",7),e.NdJ("selectedChange",function(n){e.CHM(t);const l=e.oxw();return e.KtG(l.parentId=n)}),e.qZA()(),e._UZ(12,"app-validation-errors",8),e.TgZ(13,"div",9)(14,"label"),e._uU(15,"Name"),e.qZA(),e.TgZ(16,"div",10)(17,"input",11),e.NdJ("ngModelChange",function(n){e.CHM(t);const l=e.oxw();return e.KtG(l.name=n)}),e.qZA()()(),e._UZ(18,"app-validation-errors",8),e.TgZ(19,"div",6)(20,"label"),e._uU(21,"Beschreibung"),e.qZA(),e.TgZ(22,"div",10)(23,"textarea",12),e.NdJ("ngModelChange",function(n){e.CHM(t);const l=e.oxw();return e.KtG(l.description=n)}),e.qZA()()(),e._UZ(24,"app-validation-errors",8),e.qZA(),e.TgZ(25,"app-semantic-modal",13),e.NdJ("closed",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.confirm=!1)})("confirm",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onConfirm())}),e._uU(26," Das L\xf6schen einer Serie kann "),e.TgZ(27,"strong"),e._uU(28,"nicht"),e.qZA(),e._uU(29," r\xfcckg\xe4ngig gemacht werden. Soll die Serie wirklich endg\xfcltig entfernt werden? "),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngClass",e.VKq(15,h,!t.edit.isDirty)),e.xp6(2),e.Q6J("ngClass",e.VKq(17,h,!t.edit.isDirty||t.edit.validationErrors)),e.xp6(2),e.Q6J("ngIf",t.editId),e.xp6(1),e.Q6J("ngClass",e.VKq(19,M,t.edit.validationErrors)),e.xp6(1),e.Q6J("ngClass",e.VKq(21,m,null==t.edit.validationErrors?null:t.edit.validationErrors.parentId)),e.xp6(3),e.Q6J("items",t.parentAsItems)("selected",t.parentId),e.xp6(1),e.Q6J("list",null==t.edit.validationErrors?null:t.edit.validationErrors.parentId),e.xp6(1),e.Q6J("ngClass",e.VKq(23,m,null==t.edit.validationErrors?null:t.edit.validationErrors.name)),e.xp6(4),e.Q6J("ngModel",t.name),e.xp6(1),e.Q6J("list",null==t.edit.validationErrors?null:t.edit.validationErrors.name),e.xp6(1),e.Q6J("ngClass",e.VKq(25,m,null==t.edit.validationErrors?null:t.edit.validationErrors.description)),e.xp6(4),e.Q6J("ngModel",t.description),e.xp6(1),e.Q6J("list",null==t.edit.validationErrors?null:t.edit.validationErrors.description),e.xp6(1),e.Q6J("show",t.confirm)}}let Z=(()=>{class i extends _.U{constructor(t){super(),this._service=t,this._map={},this.parentAsItems=[]}getEditService(){return this._service}reload(){super.reload();const t=new Set,s=n=>{t.add(n._id);for(const l of n.children||[])s(l)};if(this.editId&&"@"!==this.editId){const n=this._map[this.editId];n&&s(n)}this.parentAsItems=Object.keys(this._map).filter(n=>!t.has(n)).map(n=>this._map[n]).sort((n,l)=>n.fullName.toLocaleLowerCase().localeCompare(l.fullName.toLocaleLowerCase())).map(n=>({key:n._id,text:n.fullName}))}ngOnInit(){super.ngOnInit(),this._all=this._service.map.subscribe(t=>{this._map=t,this.reload()})}ngOnDestroy(){super.ngOnDestroy(),this._all?.unsubscribe()}onSave(){this.edit&&this._service.addOrUpdate(this.editId,this.edit)}onConfirm(){this._service.remove(this.editId),this.confirm=!1}get name(){return this.edit?.name||""}set name(t){this.edit&&(this.edit.name=t)}get description(){return this.edit?.description||""}set description(t){this.edit&&(this.edit.description=t)}get parentId(){return this.edit?.parentId||""}set parentId(t){this.edit&&(this.edit.parentId=t||void 0)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u._))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-series-form"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"actions"],[1,"ui","button",3,"ngClass","click"],[1,"ui","primary","button",3,"ngClass","click"],["class","ui negative button",3,"click",4,"ngIf"],[1,"ui","form",3,"ngClass"],[1,"field",3,"ngClass"],["hint","(keine)",3,"items","selected","selectedChange"],[3,"list"],[1,"required","field",3,"ngClass"],[1,"ui","input"],["type","text",3,"ngModel","ngModelChange"],["rows","5",3,"ngModel","ngModelChange"],[3,"show","closed","confirm"],[1,"ui","negative","button",3,"click"]],template:function(t,s){1&t&&e.YNc(0,w,30,27,"div",0),2&t&&e.Q6J("ngIf",s.edit)},dependencies:[a.mk,a.O5,C.u,d.Fj,d.JJ,d.On,v.z,x.H],styles:["[_nghost-%COMP%]{width:100%;height:100%;padding-right:.5em;overflow:auto}"]}),i})();var y=r(3771);const O=function(i){return["/series",i]};let F=(()=>{class i{constructor(){this.series=void 0}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-series-item"]],inputs:{series:"series"},decls:2,vars:4,consts:[[1,"item",3,"routerLink"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e._uU(1),e.qZA()),2&t&&(e.Q6J("routerLink",e.VKq(2,O,s.series._id)),e.xp6(1),e.Oqu(s.series.name))},dependencies:[c.rH],styles:["[_nghost-%COMP%]{overflow:hidden}.item[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"]}),i})();const J=function(i){return{active:i}};function T(i,o){if(1&i&&e._UZ(0,"app-series-item",4),2&i){const t=o.$implicit,s=e.oxw();e.Akn("margin-left: "+t.level+"em"),e.Q6J("ngClass",e.VKq(4,J,t._id===s.selected))("series",t)}}let I=(()=>{class i{constructor(t){this._service=t,this.selected="",this.items=[],this.all=[],this._map={},this._filter=""}ngOnInit(){this._query=this._service.map.subscribe(t=>{this._map=t,this.all=Object.keys(t).map(s=>t[s]).sort((s,n)=>s.fullName.toLocaleLowerCase().localeCompare(n.fullName.toLocaleLowerCase())),this.refreshFilter()})}get filter(){return this._filter}set filter(t){this._filter=t,this.refreshFilter()}refreshFilter(){const t=(this._filter||"").toLocaleLowerCase(),s=new Set(this.all.filter(n=>!t||n.fullName.toLocaleLowerCase().indexOf(t)>=0).map(n=>n._id));for(let n of Array.from(s))for(;;){const l=this._map[n];if(!l)break;s.add(n),n=l.parentId||""}this.items=this.all.filter(n=>s.has(n._id))}ngOnDestroy(){this._query?.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u._))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-series-list"]],inputs:{selected:"selected"},decls:4,vars:3,consts:[[1,"complete"],["hint","Suche...",3,"text","clearable","textChange"],[1,"ui","selection","list"],["class","item",3,"ngClass","series","style",4,"ngFor","ngForOf"],[1,"item",3,"ngClass","series"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"semantic-search",1),e.NdJ("textChange",function(l){return s.filter=l}),e.qZA(),e.TgZ(2,"div",2),e.YNc(3,T,1,6,"app-series-item",3),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("text",s.filter)("clearable",!0),e.xp6(2),e.Q6J("ngForOf",s.items))},dependencies:[a.mk,a.sg,y.g,F],styles:["[_nghost-%COMP%]{width:100%;height:100%;overflow:auto}.complete[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto 1fr;height:100%;overflow:hidden}.complete[_ngcontent-%COMP%] > .ui.list[_ngcontent-%COMP%]{row-gap:10em;padding:.5em;overflow:auto;background:#ffffff}.complete[_ngcontent-%COMP%] > .ui.list[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%] + .item[_ngcontent-%COMP%]{margin-top:.5em}.complete[_ngcontent-%COMP%] > .ui.list[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]:not(.active):not(:hover){color:#666;background:#dddddd}"]}),i})(),f=(()=>{class i{constructor(t){this._route=t,this.selected=""}ngOnInit(){this._query=this._route.params.subscribe(t=>this.selected=t.id)}ngOnDestroy(){this._query?.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(c.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-series"]],decls:3,vars:2,consts:[[1,"page"],["list","",3,"selected"],["detail","",3,"selected"]],template:function(t,s){1&t&&(e.TgZ(0,"app-master-detail",0),e._UZ(1,"app-series-list",1)(2,"app-series-form",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("selected",s.selected),e.xp6(1),e.Q6J("selected",s.selected))},dependencies:[g.B,Z,I],styles:["[_nghost-%COMP%]{width:100%;height:100%;overflow:hidden}.page[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}"]}),i})();const A=[{component:f,path:"",pathMatch:"full"},{component:f,path:":id"}];let L=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[c.Bz.forChild(A),c.Bz]}),i})();var b=r(1075);let Q=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[a.ez,b.m,c.Bz,d.u5,L]}),i})()}}]);