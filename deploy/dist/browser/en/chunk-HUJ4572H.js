import{a as N}from"./chunk-HY6WVRKJ.js";import{a as re}from"./chunk-7XZBX7AN.js";import{A as V,B as g,C as O,D as d,H as U,I as X,L as h,M as E,N as M,O as _,T as I,U as W,V as j,X as z,aa as B,ba as q,ca as H,da as J,fa as K,g as y,ia as Q,j as c,ja as R,k as m,ka as Y,la as Z,ma as ee,n as r,o as C,oa as te,p as u,pa as ie,q as F,qa as ne,r as D,s as v,t as o,u as k,v as l,w as s,x as p,y as w,z as G}from"./chunk-YYG3BXA6.js";var oe=n=>({disabled:n}),me=n=>({errors:n}),L=n=>({error:n});function pe(n,P){if(n&1){let e=w();l(0,"div",21),O("click",function(){c(e);let t=d(2);return m(t.onRemove());}),g(1,6),s();}}function ue(n,P){if(n&1){let e=w();l(0,"div")(1,"div",8)(2,"div",9),O("click",function(){c(e);let t=d();return m(t.reload());}),g(3,0),s(),l(4,"div",10),O("click",function(){c(e);let t=d();return m(t.onSave());}),g(5,1),s(),v(6,pe,2,0,"div",11),s(),l(7,"div",12)(8,"div",13)(9,"label"),g(10,2),s(),l(11,"semantic-single-select",14),M("selectedChange",function(t){c(e);let a=d();return E(a.parentId,t)||(a.parentId=t),m(t);}),s()(),p(12,"app-validation-errors",15),l(13,"div",16)(14,"label"),g(15,3),s(),l(16,"div",17)(17,"input",18),M("ngModelChange",function(t){c(e);let a=d();return E(a.name,t)||(a.name=t),m(t);}),s()()(),p(18,"app-validation-errors",15),l(19,"div",13)(20,"label"),g(21,4),s(),l(22,"div",17)(23,"textarea",19),M("ngModelChange",function(t){c(e);let a=d();return E(a.description,t)||(a.description=t),m(t);}),s()()(),p(24,"app-validation-errors",15),s(),l(25,"app-semantic-modal",20),O("closed",function(){c(e);let t=d();return m(t.confirm=!1);})("confirm",function(){c(e);let t=d();return m(t.onConfirm());}),G(26,5),p(27,"strong"),V(),s()();}if(n&2){let e=d();r(2),o("ngClass",_(15,oe,!e.edit.isDirty)),r(2),o("ngClass",_(17,oe,!e.edit.isDirty||e.edit.validationErrors)),r(2),o("ngIf",e.editId),r(),o("ngClass",_(19,me,e.edit.validationErrors)),r(),o("ngClass",_(21,L,e.edit.validationErrors==null?null:e.edit.validationErrors.parentId)),r(3),o("items",e.parentAsItems),h("selected",e.parentId),r(),o("list",e.edit.validationErrors==null?null:e.edit.validationErrors.parentId),r(),o("ngClass",_(23,L,e.edit.validationErrors==null?null:e.edit.validationErrors.name)),r(4),h("ngModel",e.name),r(),o("list",e.edit.validationErrors==null?null:e.edit.validationErrors.name),r(),o("ngClass",_(25,L,e.edit.validationErrors==null?null:e.edit.validationErrors.description)),r(4),h("ngModel",e.description),r(),o("list",e.edit.validationErrors==null?null:e.edit.validationErrors.description),r(),o("show",e.confirm);}}var se=(()=>{class n extends re{getEditService(){return this._service;}constructor(e){super(),this._service=e,this._map={},this.parentAsItems=[];}reload(){super.reload();let e=new Set(),i=t=>{e.add(t._id);for(let a of t.children||[])i(a);};if(this.editId&&this.editId!=="@"){let t=this._map[this.editId];t&&i(t);}this.parentAsItems=Object.keys(this._map).filter(t=>!e.has(t)).map(t=>this._map[t]).sort((t,a)=>t.fullName.toLocaleLowerCase().localeCompare(a.fullName.toLocaleLowerCase())).map(t=>({key:t._id,text:t.fullName}));}ngOnInit(){super.ngOnInit(),this._all=this._service.map.subscribe(e=>{this._map=e,this.reload();});}ngOnDestroy(){super.ngOnDestroy(),this._all?.unsubscribe();}onSave(){this.edit&&this._service.addOrUpdate(this.editId,this.edit);}onConfirm(){this._service.remove(this.editId),this.confirm=!1;}get name(){return this.edit?.name||"";}set name(e){this.edit&&(this.edit.name=e);}get description(){return this.edit?.description||"";}set description(e){this.edit&&(this.edit.description=e);}get parentId(){return this.edit?.parentId||"";}set parentId(e){this.edit&&(this.edit.parentId=e||void 0);}static{this.ɵfac=function(i){return new(i||n)(C(N));};}static{this.ɵcmp=u({type:n,selectors:[["app-series-form"]],standalone:!1,features:[D],decls:1,vars:1,consts:()=>{let e;e="(none)";let i;i="Cancel";let t;t="Save";let a;a="Parent Series";let S;S="Name";let A;A="Description";let $;$="\n          Deleting a Series can\n          "+"\uFFFD#27\uFFFD"+"\n          not\n          "+"\uFFFD/#27\uFFFD"+"\n          be undone. Do you really want to delete this Series?\n        ";let b;return b="Delete",[i,t,a,S,A,$,b,[4,"ngIf"],[1,"actions"],[1,"ui","button",3,"click","ngClass"],[1,"ui","primary","button",3,"click","ngClass"],["class","ui negative button",3,"click",4,"ngIf"],[1,"ui","form",3,"ngClass"],[1,"field",3,"ngClass"],["hint",e,3,"selectedChange","items","selected"],[3,"list"],[1,"required","field",3,"ngClass"],[1,"ui","input"],["type","text",3,"ngModelChange","ngModel"],["rows","5",3,"ngModelChange","ngModel"],[3,"closed","confirm","show"],[1,"ui","negative","button",3,"click"]];},template:function(i,t){i&1&&v(0,ue,28,27,"div",7),i&2&&o("ngIf",t.edit);},dependencies:[I,j,Y,B,q,H,ee,ie],styles:["[_nghost-%COMP%]{width:100%;height:100%;padding-right:.5em;overflow:auto}"]});}}return n;})();var Se=n=>["/series",n],ae=(()=>{class n{constructor(){this.series=void 0;}static{this.ɵfac=function(i){return new(i||n)();};}static{this.ɵcmp=u({type:n,selectors:[["app-series-item"]],inputs:{series:"series"},standalone:!1,decls:2,vars:4,consts:[[1,"item",3,"routerLink"]],template:function(i,t){i&1&&(l(0,"div",0),U(1),s()),i&2&&(o("routerLink",_(2,Se,t.series._id)),r(),X(t.series.name));},dependencies:[Q],styles:["[_nghost-%COMP%]{overflow:hidden}.item[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"]});}}return n;})();var he=n=>({active:n});function Ee(n,P){if(n&1&&p(0,"app-series-item",4),n&2){let e=P.$implicit,i=d();k("margin-left: "+e.level+"em"),o("ngClass",_(4,he,e._id===i.selected))("series",e);}}var le=(()=>{class n{constructor(e){this._service=e,this.selected="",this.items=[],this.all=[],this._map={},this._filter="";}ngOnInit(){this._query=this._service.map.subscribe(e=>{this._map=e,this.all=Object.keys(e).map(i=>e[i]).sort((i,t)=>i.fullName.toLocaleLowerCase().localeCompare(t.fullName.toLocaleLowerCase())),this.refreshFilter();});}get filter(){return this._filter;}set filter(e){this._filter=e,this.refreshFilter();}refreshFilter(){let e=(this._filter||"").toLocaleLowerCase(),i=new Set(this.all.filter(t=>!e||t.fullName.toLocaleLowerCase().indexOf(e)>=0).map(t=>t._id));for(let t of Array.from(i))for(;;){let a=this._map[t];if(!a)break;i.add(t),t=a.parentId||"";}this.items=this.all.filter(t=>i.has(t._id));}ngOnDestroy(){this._query?.unsubscribe();}static{this.ɵfac=function(i){return new(i||n)(C(N));};}static{this.ɵcmp=u({type:n,selectors:[["app-series-list"]],inputs:{selected:"selected"},standalone:!1,decls:4,vars:3,consts:()=>{let e;return e="Search...",[[1,"complete"],["hint",e,3,"textChange","text","clearable"],[1,"ui","selection","list"],["class","item",3,"ngClass","series","style",4,"ngFor","ngForOf"],[1,"item",3,"ngClass","series"]];},template:function(i,t){i&1&&(l(0,"div",0)(1,"semantic-search",1),M("textChange",function(S){return E(t.filter,S)||(t.filter=S),S;}),s(),l(2,"div",2),v(3,Ee,1,6,"app-series-item",3),s()()),i&2&&(r(),h("text",t.filter),o("clearable",!0),r(2),o("ngForOf",t.items));},dependencies:[I,W,te,ae],styles:["[_nghost-%COMP%]{width:100%;height:100%;overflow:auto}.complete[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto 1fr;height:100%;overflow:hidden}.complete[_ngcontent-%COMP%] > .ui.list[_ngcontent-%COMP%]{row-gap:10em;padding:.5em;overflow:auto;background:#fff}.complete[_ngcontent-%COMP%] > .ui.list[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%] + .item[_ngcontent-%COMP%]{margin-top:.5em}.complete[_ngcontent-%COMP%] > .ui.list[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]:not(.active):not(:hover){color:#666;background:#ddd}"]});}}return n;})();var x=(()=>{class n{constructor(e){this._route=e,this.selected="";}ngOnInit(){this._query=this._route.params.subscribe(e=>this.selected=e.id);}ngOnDestroy(){this._query?.unsubscribe();}static{this.ɵfac=function(i){return new(i||n)(C(K));};}static{this.ɵcmp=u({type:n,selectors:[["app-series"]],standalone:!1,decls:3,vars:2,consts:[[1,"page"],["list","",3,"selected"],["detail","",3,"selected"]],template:function(i,t){i&1&&(l(0,"app-master-detail",0),p(1,"app-series-list",1)(2,"app-series-form",2),s()),i&2&&(r(),o("selected",t.selected),r(),o("selected",t.selected));},dependencies:[Z,se,le],styles:["[_nghost-%COMP%]{width:100%;height:100%;overflow:hidden}.page[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}"]});}}return n;})();var ve=[{component:x,path:"",pathMatch:"full"},{component:x,path:":id"}],de=(()=>{class n{static{this.ɵfac=function(i){return new(i||n)();};}static{this.ɵmod=F({type:n});}static{this.ɵinj=y({imports:[R.forChild(ve),R]});}}return n;})();var qe=(()=>{class n{static{this.ɵfac=function(i){return new(i||n)();};}static{this.ɵmod=F({type:n});}static{this.ɵinj=y({imports:[z,ne,R,J,de]});}}return n;})();export{qe as SeriesModule};/**i18n:b271914f691dadc2f8b5c881bd202ccd56c2d40c5c7c5d278b1e99a15b46a6b9*/