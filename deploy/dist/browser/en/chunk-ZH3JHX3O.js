import{c as u,d as G}from"./chunk-WXZQDWGW.js";import{a as ce,b as de,c as me}from"./chunk-TAHFQH5W.js";import{a as Ce}from"./chunk-HFSCMN7N.js";import{A as d,B as A,C as p,F as J,G as Z,H as ee,I,J as w,M as h,N as O,O as S,P as m,U as P,V as U,W as te,Y as ne,ba as ie,ca as oe,da as re,ea as ae,g as x,ga as se,i as q,j as f,ja as k,k as E,ka as F,l as Q,la as le,ma as _e,n as a,o as v,oa as pe,p as C,q as b,r as K,s as y,t as s,u as H,w as r,x as l,y as _,z as X}from"./chunk-QWA7TTEO.js";var Ne={[u.Box]:"briefcase",[u.Disk]:"hdd",[u.FeatureSet]:"zip",[u.Folder]:"folder",[u.Shelf]:"building",[u.Undefined]:"help"},D=(()=>{class i{constructor(){this.type=u.Undefined;}get iconType(){return Ne[this.type]||"help";}static{this.ɵfac=function(n){return new(n||i)();};}static{this.ɵcmp=C({type:i,selectors:[["app-container-icon"]],inputs:{type:"type"},standalone:!1,decls:1,vars:1,consts:[[1,"ui","icon",3,"ngClass"]],template:function(n,t){n&1&&_(0,"i",0),n&2&&s("ngClass",t.iconType);},dependencies:[P],encapsulation:2});}}return i;})();var ye=["selector"],fe=(()=>{class i{constructor(){this.selected=u.Undefined,this.selectedChange=new Q();}setSelected(e){$(this.selector?.nativeElement)?.dropdown("set exactly",typeof e=="number"?`${e}`:[]);}ngAfterViewInit(){let e=$(this.selector?.nativeElement);e.dropdown({forceSelection:!1,onChange:n=>this.selectedChange.emit(parseInt(n,10))}),setTimeout(()=>{this.setSelected(this.selected),e.css("visibility","");},100);}ngOnChanges(e){let n=e.selected;n&&this.setSelected(n.currentValue);}ngOnDestroy(){$(this.selector?.nativeElement)?.dropdown("destroy");}static{this.ɵfac=function(n){return new(n||i)();};}static{this.ɵcmp=C({type:i,selectors:[["app-component-type"]],viewQuery:function(n,t){if(n&1&&J(ye,5),n&2){let o;Z(o=ee())&&(t.selector=o.first);}},inputs:{selected:"selected"},outputs:{selectedChange:"selectedChange"},standalone:!1,features:[q],decls:29,vars:6,consts:()=>{let e;e="(unknown)";let n;n="Small Box";let t;t="Large Box";let o;o="Shelf";let c;c="Folder";let T;return T="(External) Harddisk",[["selector",""],e,n,t,o,c,T,[1,"ui","selection","dropdown",2,"visibility","hidden"],[1,"dropdown","icon"],[1,"default","text"],[1,"menu"],["data-value","0",1,"item"],[3,"type"],["data-value","1",1,"item"],["data-value","2",1,"item"],["data-value","3",1,"item"],["data-value","5",1,"item"],["data-value","4",1,"item"]];},template:function(n,t){n&1&&(r(0,"div",7,0),_(2,"i",8)(3,"div",9),r(4,"div",10)(5,"div",11),_(6,"app-container-icon",12),r(7,"span"),d(8,1),l()(),r(9,"div",13),_(10,"app-container-icon",12),r(11,"span"),d(12,2),l()(),r(13,"div",14),_(14,"app-container-icon",12),r(15,"span"),d(16,3),l()(),r(17,"div",15),_(18,"app-container-icon",12),r(19,"span"),d(20,4),l()(),r(21,"div",16),_(22,"app-container-icon",12),r(23,"span"),d(24,5),l()(),r(25,"div",17),_(26,"app-container-icon",12),r(27,"span"),d(28,6),l()()()()),n&2&&(a(6),s("type",0),a(4),s("type",1),a(4),s("type",2),a(4),s("type",3),a(4),s("type",5),a(4),s("type",4));},dependencies:[D],styles:[".ui.selection.dropdown[_ngcontent-%COMP%] > .text[_ngcontent-%COMP%]{width:12em}"]});}}return i;})();var Ee=i=>({disabled:i}),Pe=i=>({errors:i}),L=i=>({error:i}),Ae=i=>["/recordings",i,"EDIT"];function Ie(i,R){if(i&1){let e=X();r(0,"div",27),A("click",function(){f(e);let t=p(2);return E(t.onRemove());}),d(1,8),l();}}function we(i,R){if(i&1&&(r(0,"tr",30)(1,"td"),I(2),l(),r(3,"td",31),I(4),l()()),i&2){let e=R.$implicit;s("routerLink",m(3,Ae,e._id)),a(2),w(e.fullName),a(2),w(e.containerPosition);}}function $e(i,R){if(i&1&&(r(0,"table",28)(1,"thead")(2,"tr")(3,"th"),d(4,9),l(),r(5,"th"),d(6,10),l()()(),r(7,"tbody"),y(8,we,5,5,"tr",29),l()()),i&2){let e=p(2);a(8),s("ngForOf",e.contents);}}function Fe(i,R){if(i&1){let e=X();r(0,"div")(1,"div",12)(2,"div",13),A("click",function(){f(e);let t=p();return E(t.reload());}),d(3,0),l(),r(4,"div",14),A("click",function(){f(e);let t=p();return E(t.onSave());}),d(5,1),l(),y(6,Ie,2,0,"div",15),l(),r(7,"div",16)(8,"div",17)(9,"label"),d(10,2),l(),r(11,"semantic-single-select",18),S("selectedChange",function(t){f(e);let o=p();return O(o.parentId,t)||(o.parentId=t),E(t);}),l()(),_(12,"app-validation-errors",19),r(13,"div",20)(14,"label"),d(15,3),l(),r(16,"div",21)(17,"input",22),S("ngModelChange",function(t){f(e);let o=p();return O(o.name,t)||(o.name=t),E(t);}),l()()(),_(18,"app-validation-errors",19),r(19,"div",20)(20,"label"),d(21,4),l(),r(22,"app-component-type",23),S("selectedChange",function(t){f(e);let o=p();return O(o.type,t)||(o.type=t),E(t);}),l()(),_(23,"app-validation-errors",19),r(24,"div",17)(25,"label"),d(26,5),l(),r(27,"div",21)(28,"textarea",24),S("ngModelChange",function(t){f(e);let o=p();return O(o.description,t)||(o.description=t),E(t);}),l()()(),_(29,"app-validation-errors",19),r(30,"div",17)(31,"label"),d(32,6),l(),r(33,"div",21)(34,"input",22),S("ngModelChange",function(t){f(e);let o=p();return O(o.parentLocation,t)||(o.parentLocation=t),E(t);}),l()()(),_(35,"app-validation-errors",19),l(),y(36,$e,9,1,"table",25),r(37,"app-semantic-modal",26),A("closed",function(){f(e);let t=p();return E(t.confirm=!1);})("confirm",function(){f(e);let t=p();return E(t.onConfirm());}),d(38,7),l()();}if(i&2){let e=p();a(2),s("ngClass",m(22,Ee,!e.edit.isDirty)),a(2),s("ngClass",m(24,Ee,!e.edit.isDirty||e.edit.validationErrors)),a(2),s("ngIf",e.editId),a(),s("ngClass",m(26,Pe,e.edit.validationErrors)),a(),s("ngClass",m(28,L,e.edit.validationErrors==null?null:e.edit.validationErrors.parentId)),a(3),s("items",e.parentAsItems),h("selected",e.parentId),a(),s("list",e.edit.validationErrors==null?null:e.edit.validationErrors.parentId),a(),s("ngClass",m(30,L,e.edit.validationErrors==null?null:e.edit.validationErrors.name)),a(4),h("ngModel",e.name),a(),s("list",e.edit.validationErrors==null?null:e.edit.validationErrors.name),a(),s("ngClass",m(32,L,e.edit.validationErrors==null?null:e.edit.validationErrors.type)),a(3),h("selected",e.type),a(),s("list",e.edit.validationErrors==null?null:e.edit.validationErrors.type),a(),s("ngClass",m(34,L,e.edit.validationErrors==null?null:e.edit.validationErrors.description)),a(4),h("ngModel",e.description),a(),s("list",e.edit.validationErrors==null?null:e.edit.validationErrors.description),a(),s("ngClass",m(36,L,e.edit.validationErrors==null?null:e.edit.validationErrors.parentLocation)),a(4),h("ngModel",e.parentLocation),a(),s("list",e.edit.validationErrors==null?null:e.edit.validationErrors.parentLocation),a(),s("ngIf",e.contents.length>0),a(),s("show",e.confirm);}}var Me=(()=>{class i extends Ce{getEditService(){return this._service;}constructor(e){super(),this._service=e,this._map={},this.contents=[],this.parentAsItems=[];}reload(){super.reload();let e=this._contents;e&&(this._contents=void 0,e.unsubscribe()),this.contents=[];let n=new Set(),t=o=>{n.add(o._id);for(let c of o.children||[])t(c);};if(this.editId&&this.editId!=="@"){let o=this._map[this.editId];o&&t(o),this._contents=this._service.getContents(this.editId).subscribe(c=>this.contents=c);}this.parentAsItems=Object.keys(this._map).filter(o=>!n.has(o)).map(o=>this._map[o]).sort((o,c)=>o.fullName.toLocaleLowerCase().localeCompare(c.fullName.toLocaleLowerCase())).map(o=>({key:o._id,text:o.fullName}));}ngOnInit(){super.ngOnInit(),this._all=this._service.map.subscribe(e=>{this._map=e,this.reload();});}ngOnDestroy(){super.ngOnDestroy(),this._all?.unsubscribe(),this._contents?.unsubscribe();}onSave(){this.edit&&this._service.addOrUpdate(this.editId,this.edit);}onConfirm(){this._service.remove(this.editId),this.confirm=!1;}get name(){return this.edit?.name||"";}set name(e){this.edit&&(this.edit.name=e);}get description(){return this.edit?.description||"";}set description(e){this.edit&&(this.edit.description=e);}get parentId(){return this.edit?.parentId||"";}set parentId(e){this.edit&&(this.edit.parentId=e||void 0);}get parentLocation(){return this.edit?.parentLocation||"";}set parentLocation(e){this.edit&&(this.edit.parentLocation=e);}get type(){return this.edit?.type??u.Undefined;}set type(e){this.edit&&(this.edit.type=e);}static{this.ɵfac=function(n){return new(n||i)(v(G));};}static{this.ɵcmp=C({type:i,selectors:[["app-container-form"]],standalone:!1,features:[K],decls:1,vars:1,consts:()=>{let e;e="(none)";let n;n="Cancel";let t;t="Save";let o;o="Parent Storage";let c;c="Name";let T;T="Type of Storage";let M;M="Description";let z;z="Location in Parent Storage";let W;W="Deleting a Storage can not be undone. Do you really want to delete this Storage?";let B;B="Delete";let Y;Y="Recording";let j;return j="Position",[n,t,o,c,T,M,z,W,B,Y,j,[4,"ngIf"],[1,"actions"],[1,"ui","button",3,"click","ngClass"],[1,"ui","primary","button",3,"click","ngClass"],["class","ui negative button",3,"click",4,"ngIf"],[1,"ui","form",3,"ngClass"],[1,"field",3,"ngClass"],["hint",e,3,"selectedChange","items","selected"],[3,"list"],[1,"required","field",3,"ngClass"],[1,"ui","input"],["type","text",3,"ngModelChange","ngModel"],[3,"selectedChange","selected"],["rows","5",3,"ngModelChange","ngModel"],["class","ui celled collapsing fixed striped unstackable compact table contents",4,"ngIf"],[3,"closed","confirm","show"],[1,"ui","negative","button",3,"click"],[1,"ui","celled","collapsing","fixed","striped","unstackable","compact","table","contents"],[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"],[2,"text-align","center"]];},template:function(n,t){n&1&&y(0,Fe,39,38,"div",11),n&2&&s("ngIf",t.edit);},dependencies:[k,P,U,te,le,ie,oe,re,_e,pe,fe],styles:["[_nghost-%COMP%]{width:100%;height:100%;padding-right:.5em;overflow:auto}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{cursor:pointer}"]});}}return i;})();var xe=i=>["/containers",i],he=(()=>{class i{constructor(){this.container=void 0;}static{this.ɵfac=function(n){return new(n||i)();};}static{this.ɵcmp=C({type:i,selectors:[["app-container-item"]],inputs:{container:"container"},standalone:!1,decls:4,vars:5,consts:[[1,"item",3,"routerLink"],[3,"type"],[1,"content"]],template:function(n,t){n&1&&(r(0,"div",0),_(1,"app-container-icon",1),r(2,"div",2),I(3),l()()),n&2&&(s("routerLink",m(3,xe,t.container._id)),a(),s("type",t.container.type),a(2),w(t.container.name));},dependencies:[k,D],styles:["[_nghost-%COMP%]{overflow:hidden}.item[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;align-items:center;overflow:hidden}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"]});}}return i;})();var Ue=i=>({active:i});function ke(i,R){if(i&1&&_(0,"app-container-item",4),i&2){let e=R.$implicit,n=p();H("margin-left: "+e.level+"em"),s("ngClass",m(4,Ue,e._id===n.selected))("container",e);}}var Oe=(()=>{class i{constructor(e){this._service=e,this.selected="",this.items=[],this.map={},this.all=[],this._filter="";}ngOnInit(){this._query=this._service.map.subscribe(e=>{let n=Object.keys(e).map(c=>e[c]).filter(c=>!c.parentId||!e[c.parentId]);n.sort((c,T)=>(c.name||c._id).toLocaleLowerCase().localeCompare((T.name||T._id).toLocaleLowerCase()));let t=[],o=c=>{t.push(c),c.children?.forEach(o);};n.forEach(o),this.all=t,this.map=e,this.refreshFilter();});}get filter(){return this._filter;}set filter(e){this._filter=e,this.refreshFilter();}refreshFilter(){let e=(this._filter||"").toLocaleLowerCase(),n=new Set(this.all.filter(t=>!e||(t.fullName||t.name||t._id).toLocaleLowerCase().indexOf(e)>=0).map(t=>t._id));for(let t of Array.from(n))for(;;){let o=this.map[t];if(!o)break;n.add(t),t=o.parentId||"";}this.items=this.all.filter(t=>n.has(t._id));}ngOnDestroy(){this._query?.unsubscribe();}static{this.ɵfac=function(n){return new(n||i)(v(G));};}static{this.ɵcmp=C({type:i,selectors:[["app-container-list"]],inputs:{selected:"selected"},standalone:!1,decls:4,vars:3,consts:()=>{let e;return e="Search...",[[1,"complete"],["hint",e,3,"textChange","text","clearable"],[1,"ui","selection","list"],["class","item",3,"ngClass","container","style",4,"ngFor","ngForOf"],[1,"item",3,"ngClass","container"]];},template:function(n,t){n&1&&(r(0,"div",0)(1,"semantic-search",1),S("textChange",function(c){return O(t.filter,c)||(t.filter=c),c;}),l(),r(2,"div",2),y(3,ke,1,6,"app-container-item",3),l()()),n&2&&(a(),h("text",t.filter),s("clearable",!0),a(2),s("ngForOf",t.items));},dependencies:[P,U,de,he],styles:["[_nghost-%COMP%]{width:100%;height:100%;overflow:auto}.complete[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto 1fr;height:100%;overflow:hidden}.complete[_ngcontent-%COMP%] > .ui.list[_ngcontent-%COMP%]{row-gap:10em;padding:.5em;overflow:auto;background:#fff}.complete[_ngcontent-%COMP%] > .ui.list[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%] + .item[_ngcontent-%COMP%]{margin-top:.5em}.complete[_ngcontent-%COMP%] > .ui.list[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]:not(.active):not(:hover){color:#666;background:#ddd}"]});}}return i;})();var V=(()=>{class i{constructor(e){this._route=e,this.selected="";}ngOnInit(){this._query=this._route.params.subscribe(e=>this.selected=e.id);}ngOnDestroy(){this._query?.unsubscribe();}static{this.ɵfac=function(n){return new(n||i)(v(se));};}static{this.ɵcmp=C({type:i,selectors:[["app-container"]],standalone:!1,decls:3,vars:2,consts:[[1,"page"],["list","",3,"selected"],["detail","",3,"selected"]],template:function(n,t){n&1&&(r(0,"app-master-detail",0),_(1,"app-container-list",1)(2,"app-container-form",2),l()),n&2&&(a(),s("selected",t.selected),a(),s("selected",t.selected));},dependencies:[ce,Me,Oe],styles:["[_nghost-%COMP%]{width:100%;height:100%;overflow:hidden}.page[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}"]});}}return i;})();var De=[{component:V,path:"",pathMatch:"full"},{component:V,path:":id"}],Se=(()=>{class i{static{this.ɵfac=function(n){return new(n||i)();};}static{this.ɵmod=b({type:i});}static{this.ɵinj=x({imports:[F.forChild(De),F]});}}return i;})();var Et=(()=>{class i{static{this.ɵfac=function(n){return new(n||i)();};}static{this.ɵmod=b({type:i});}static{this.ɵinj=x({imports:[Se,ne,me,F,ae]});}}return i;})();export{Et as ContainerModule};/**i18n:4f0ea12499191b9fb7bfd15ae35102ab286a3db89d761e221a76f1a80285e269*/