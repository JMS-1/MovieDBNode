import{a as k}from"./chunk-FAE5Z5RX.js";import{c as f}from"./chunk-LPDBFAEC.js";import{a as ae}from"./chunk-MC4SG33P.js";import{a as se}from"./chunk-57ALTTQC.js";import{a as de}from"./chunk-M5RA6FRI.js";import{a as le,b as _e,c as ce}from"./chunk-Q3XM6DP4.js";import{a as ne,b as ie,c as oe,d as re}from"./chunk-NRD4YDIC.js";import{A as Q,B as R,E as l,G as K,I as a,J as _,K as p,L as D,M as m,N as w,O as g,R as H,S as J,T as Z,U as F,V as L,Y as h,Z as N,_ as y,aa as C,la as P,m as q,ma as b,n as O,na as ee,o as S,q as j,qa as A,u as s,va as te,w as v,x as u,ya as U}from"./chunk-5HCCPM3E.js";var Ee={[f.Box]:"briefcase",[f.Disk]:"hdd",[f.FeatureSet]:"zip",[f.Folder]:"folder",[f.Shelf]:"building",[f.Undefined]:"help"},G=(()=>{let r=class r{constructor(){this.type=f.Undefined;}get iconType(){return Ee[this.type]||"help";}};r.ɵfac=function(t){return new(t||r)();},r.ɵcmp=u({type:r,selectors:[["app-container-icon"]],inputs:{type:"type"},decls:1,vars:1,consts:[[1,"ui","icon",3,"ngClass"]],template:function(t,n){t&1&&p(0,"i",0),t&2&&l("ngClass",n.iconType);},dependencies:[A,P],encapsulation:2});let o=r;return o;})();var Te=o=>["/containers",o],me=(()=>{let r=class r{constructor(){this.container=void 0;}};r.ɵfac=function(t){return new(t||r)();},r.ɵcmp=u({type:r,selectors:[["app-container-item"]],inputs:{container:"container"},decls:4,vars:5,consts:[[1,"item",3,"routerLink"],[3,"type"],[1,"content"]],template:function(t,n){t&1&&(a(0,"div",0),p(1,"app-container-icon",1),a(2,"div",2),F(3),_()()),t&2&&(l("routerLink",C(3,Te,n.container._id)),s(),l("type",n.container.type),s(2),L(n.container.name));},dependencies:[U,G],styles:["[_nghost-%COMP%]{overflow:hidden}.item[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;align-items:center;overflow:hidden}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"]});let o=r;return o;})();var Se=o=>({active:o});function Me(o,r){if(o&1&&p(0,"app-container-item",4),o&2){let i=r.$implicit,e=g();K("margin-left: "+i.level+"em"),l("ngClass",C(4,Se,i._id===e.selected))("container",i);}}var ge=(()=>{let r=class r{constructor(e){this._service=e,this.selected="",this.items=[],this.map={},this.all=[],this._filter="";}ngOnInit(){this._query=this._service.map.subscribe(e=>{let t=Object.keys(e).map(d=>e[d]).filter(d=>!d.parentId||!e[d.parentId]);t.sort((d,E)=>(d.name||d._id).toLocaleLowerCase().localeCompare((E.name||E._id).toLocaleLowerCase()));let n=[],c=d=>{var E;n.push(d),(E=d.children)==null||E.forEach(c);};t.forEach(c),this.all=n,this.map=e,this.refreshFilter();});}get filter(){return this._filter;}set filter(e){this._filter=e,this.refreshFilter();}refreshFilter(){let e=(this._filter||"").toLocaleLowerCase(),t=new Set(this.all.filter(n=>!e||(n.fullName||n.name||n._id).toLocaleLowerCase().indexOf(e)>=0).map(n=>n._id));for(let n of Array.from(t))for(;;){let c=this.map[n];if(!c)break;t.add(n),n=c.parentId||"";}this.items=this.all.filter(n=>t.has(n._id));}ngOnDestroy(){var e;(e=this._query)==null||e.unsubscribe();}};r.ɵfac=function(t){return new(t||r)(v(k));},r.ɵcmp=u({type:r,selectors:[["app-container-list"]],inputs:{selected:"selected"},decls:4,vars:3,consts:()=>{let e;return e="Search...",[[1,"complete"],["hint",e,3,"textChange","text","clearable"],[1,"ui","selection","list"],["class","item",3,"ngClass","container","style",4,"ngFor","ngForOf"],[1,"item",3,"ngClass","container"]];},template:function(t,n){t&1&&(a(0,"div",0)(1,"semantic-search",1),y("textChange",function(d){return N(n.filter,d)||(n.filter=d),d;}),_(),a(2,"div",2),R(3,Me,1,6,"app-container-item",3),_()()),t&2&&(s(),h("text",n.filter),l("clearable",!0),s(2),l("ngForOf",n.items));},dependencies:[ae,me,A,P,b],styles:["[_nghost-%COMP%]{width:100%;height:100%;overflow:auto}.complete[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto 1fr;height:100%;overflow:hidden}.complete[_ngcontent-%COMP%] > .ui.list[_ngcontent-%COMP%]{row-gap:10em;padding:.5em;overflow:auto;background:#fff}.complete[_ngcontent-%COMP%] > .ui.list[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%] + .item[_ngcontent-%COMP%]{margin-top:.5em}.complete[_ngcontent-%COMP%] > .ui.list[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]:not(.active):not(:hover){color:#666;background:#ddd}"]});let o=r;return o;})();var he=["selector"],Ce=(()=>{let r=class r{constructor(){this.selected=f.Undefined,this.selectedChange=new j();}setSelected(e){var t,n;(n=$((t=this.selector)==null?void 0:t.nativeElement))==null||n.dropdown("set exactly",typeof e=="number"?`${e}`:[]);}ngAfterViewInit(){var t;let e=$((t=this.selector)==null?void 0:t.nativeElement);e.dropdown({forceSelection:!1,onChange:n=>this.selectedChange.emit(parseInt(n,10))}),setTimeout(()=>{this.setSelected(this.selected),e.css("visibility","");},100);}ngOnChanges(e){let t=e.selected;t&&this.setSelected(t.currentValue);}ngOnDestroy(){var e,t;(t=$((e=this.selector)==null?void 0:e.nativeElement))==null||t.dropdown("destroy");}};r.ɵfac=function(t){return new(t||r)();},r.ɵcmp=u({type:r,selectors:[["app-component-type"]],viewQuery:function(t,n){if(t&1&&H(he,5),t&2){let c;J(c=Z())&&(n.selector=c.first);}},inputs:{selected:"selected"},outputs:{selectedChange:"selectedChange"},features:[q],decls:29,vars:6,consts:()=>{let e;e="(unknown)";let t;t="Small Box";let n;n="Large Box";let c;c="Shelf";let d;d="Folder";let E;return E="(External) Harddisk",[["selector",""],e,t,n,c,d,E,[1,"ui","selection","dropdown",2,"visibility","hidden"],[1,"dropdown","icon"],[1,"default","text"],[1,"menu"],["data-value","0",1,"item"],[3,"type"],["data-value","1",1,"item"],["data-value","2",1,"item"],["data-value","3",1,"item"],["data-value","5",1,"item"],["data-value","4",1,"item"]];},template:function(t,n){t&1&&(a(0,"div",7,0),p(2,"i",8)(3,"div",9),a(4,"div",10)(5,"div",11),p(6,"app-container-icon",12),a(7,"span"),m(8,1),_()(),a(9,"div",13),p(10,"app-container-icon",12),a(11,"span"),m(12,2),_()(),a(13,"div",14),p(14,"app-container-icon",12),a(15,"span"),m(16,3),_()(),a(17,"div",15),p(18,"app-container-icon",12),a(19,"span"),m(20,4),_()(),a(21,"div",16),p(22,"app-container-icon",12),a(23,"span"),m(24,5),_()(),a(25,"div",17),p(26,"app-container-icon",12),a(27,"span"),m(28,6),_()()()()),t&2&&(s(6),l("type",0),s(4),l("type",1),s(4),l("type",2),s(4),l("type",3),s(4),l("type",5),s(4),l("type",4));},dependencies:[G],styles:[".ui.selection.dropdown[_ngcontent-%COMP%] > .text[_ngcontent-%COMP%]{width:12em}"]});let o=r;return o;})();var ue=o=>({disabled:o}),Ne=o=>({errors:o}),x=o=>({error:o}),ye=o=>["/recordings",o,"EDIT"];function Re(o,r){if(o&1){let i=D();a(0,"div",27),w("click",function(){O(i);let t=g(2);return S(t.onRemove());}),m(1,8),_();}}function ve(o,r){if(o&1&&(a(0,"tr",30)(1,"td"),F(2),_(),a(3,"td",31),F(4),_()()),o&2){let i=r.$implicit;l("routerLink",C(3,ye,i._id)),s(2),L(i.fullName),s(2),L(i.containerPosition);}}function Pe(o,r){if(o&1&&(a(0,"table",28)(1,"thead")(2,"tr")(3,"th"),m(4,9),_(),a(5,"th"),m(6,10),_()()(),a(7,"tbody"),R(8,ve,5,5,"tr",29),_()()),o&2){let i=g(2);s(8),l("ngForOf",i.contents);}}function Ae(o,r){if(o&1){let i=D();a(0,"div")(1,"div",12)(2,"div",13),w("click",function(){O(i);let t=g();return S(t.reload());}),m(3,0),_(),a(4,"div",14),w("click",function(){O(i);let t=g();return S(t.onSave());}),m(5,1),_(),R(6,Re,2,0,"div",15),_(),a(7,"div",16)(8,"div",17)(9,"label"),m(10,2),_(),a(11,"semantic-single-select",18),y("selectedChange",function(t){O(i);let n=g();return N(n.parentId,t)||(n.parentId=t),S(t);}),_()(),p(12,"app-validation-errors",19),a(13,"div",20)(14,"label"),m(15,3),_(),a(16,"div",21)(17,"input",22),y("ngModelChange",function(t){O(i);let n=g();return N(n.name,t)||(n.name=t),S(t);}),_()()(),p(18,"app-validation-errors",19),a(19,"div",20)(20,"label"),m(21,4),_(),a(22,"app-component-type",23),y("selectedChange",function(t){O(i);let n=g();return N(n.type,t)||(n.type=t),S(t);}),_()(),p(23,"app-validation-errors",19),a(24,"div",17)(25,"label"),m(26,5),_(),a(27,"div",21)(28,"textarea",24),y("ngModelChange",function(t){O(i);let n=g();return N(n.description,t)||(n.description=t),S(t);}),_()()(),p(29,"app-validation-errors",19),a(30,"div",17)(31,"label"),m(32,6),_(),a(33,"div",21)(34,"input",22),y("ngModelChange",function(t){O(i);let n=g();return N(n.parentLocation,t)||(n.parentLocation=t),S(t);}),_()()(),p(35,"app-validation-errors",19),_(),R(36,Pe,9,1,"table",25),a(37,"app-semantic-modal",26),w("closed",function(){O(i);let t=g();return S(t.confirm=!1);})("confirm",function(){O(i);let t=g();return S(t.onConfirm());}),m(38,7),_()();}if(o&2){let i=g();s(2),l("ngClass",C(22,ue,!i.edit.isDirty)),s(2),l("ngClass",C(24,ue,!i.edit.isDirty||i.edit.validationErrors)),s(2),l("ngIf",i.editId),s(),l("ngClass",C(26,Ne,i.edit.validationErrors)),s(),l("ngClass",C(28,x,i.edit.validationErrors==null?null:i.edit.validationErrors.parentId)),s(3),l("items",i.parentAsItems),h("selected",i.parentId),s(),l("list",i.edit.validationErrors==null?null:i.edit.validationErrors.parentId),s(),l("ngClass",C(30,x,i.edit.validationErrors==null?null:i.edit.validationErrors.name)),s(4),h("ngModel",i.name),s(),l("list",i.edit.validationErrors==null?null:i.edit.validationErrors.name),s(),l("ngClass",C(32,x,i.edit.validationErrors==null?null:i.edit.validationErrors.type)),s(3),h("selected",i.type),s(),l("list",i.edit.validationErrors==null?null:i.edit.validationErrors.type),s(),l("ngClass",C(34,x,i.edit.validationErrors==null?null:i.edit.validationErrors.description)),s(4),h("ngModel",i.description),s(),l("list",i.edit.validationErrors==null?null:i.edit.validationErrors.description),s(),l("ngClass",C(36,x,i.edit.validationErrors==null?null:i.edit.validationErrors.parentLocation)),s(4),h("ngModel",i.parentLocation),s(),l("list",i.edit.validationErrors==null?null:i.edit.validationErrors.parentLocation),s(),l("ngIf",i.contents.length>0),s(),l("show",i.confirm);}}var fe=(()=>{let r=class r extends le{getEditService(){return this._service;}constructor(e){super(),this._service=e,this._map={},this.contents=[],this.parentAsItems=[];}reload(){super.reload();let e=this._contents;e&&(this._contents=void 0,e.unsubscribe()),this.contents=[];let t=new Set(),n=c=>{t.add(c._id);for(let d of c.children||[])n(d);};if(this.editId&&this.editId!=="@"){let c=this._map[this.editId];c&&n(c),this._contents=this._service.getContents(this.editId).subscribe(d=>this.contents=d);}this.parentAsItems=Object.keys(this._map).filter(c=>!t.has(c)).map(c=>this._map[c]).sort((c,d)=>c.fullName.toLocaleLowerCase().localeCompare(d.fullName.toLocaleLowerCase())).map(c=>({key:c._id,text:c.fullName}));}ngOnInit(){super.ngOnInit(),this._all=this._service.map.subscribe(e=>{this._map=e,this.reload();});}ngOnDestroy(){var e,t;super.ngOnDestroy(),(e=this._all)==null||e.unsubscribe(),(t=this._contents)==null||t.unsubscribe();}onSave(){this.edit&&this._service.addOrUpdate(this.editId,this.edit);}onConfirm(){this._service.remove(this.editId),this.confirm=!1;}get name(){var e;return((e=this.edit)==null?void 0:e.name)||"";}set name(e){this.edit&&(this.edit.name=e);}get description(){var e;return((e=this.edit)==null?void 0:e.description)||"";}set description(e){this.edit&&(this.edit.description=e);}get parentId(){var e;return((e=this.edit)==null?void 0:e.parentId)||"";}set parentId(e){this.edit&&(this.edit.parentId=e||void 0);}get parentLocation(){var e;return((e=this.edit)==null?void 0:e.parentLocation)||"";}set parentLocation(e){this.edit&&(this.edit.parentLocation=e);}get type(){var e;return((e=this.edit)==null?void 0:e.type)??f.Undefined;}set type(e){this.edit&&(this.edit.type=e);}};r.ɵfac=function(t){return new(t||r)(v(k));},r.ɵcmp=u({type:r,selectors:[["app-container-form"]],features:[Q],decls:1,vars:1,consts:()=>{let e;e="(none)";let t;t="Cancel";let n;n="Save";let c;c="Parent Storage";let d;d="Name";let E;E="Type of Storage";let M;M="Description";let V;V="Location in Parent Storage";let z;z="Deleting a Storage can not be undone. Do you really want to delete this Storage?";let W;W="Delete";let B;B="Recording";let Y;return Y="Position",[t,n,c,d,E,M,V,z,W,B,Y,[4,"ngIf"],[1,"actions"],[1,"ui","button",3,"click","ngClass"],[1,"ui","primary","button",3,"click","ngClass"],["class","ui negative button",3,"click",4,"ngIf"],[1,"ui","form",3,"ngClass"],[1,"field",3,"ngClass"],["hint",e,3,"selectedChange","items","selected"],[3,"list"],[1,"required","field",3,"ngClass"],[1,"ui","input"],["type","text",3,"ngModelChange","ngModel"],[3,"selectedChange","selected"],["rows","5",3,"ngModelChange","ngModel"],["class","ui celled collapsing fixed striped unstackable compact table contents",4,"ngIf"],[3,"closed","confirm","show"],[1,"ui","negative","button",3,"click"],[1,"ui","celled","collapsing","fixed","striped","unstackable","compact","table","contents"],[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"],[2,"text-align","center"]];},template:function(t,n){t&1&&R(0,Ae,39,38,"div",11),t&2&&l("ngIf",n.edit);},dependencies:[A,P,b,ee,Ce,_e,re,ne,ie,oe,ce,U,se],styles:["[_nghost-%COMP%]{width:100%;height:100%;padding-right:.5em;overflow:auto}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{cursor:pointer}"]});let o=r;return o;})();var X=(()=>{let r=class r{constructor(e){this._route=e,this.selected="";}ngOnInit(){this._query=this._route.params.subscribe(e=>this.selected=e.id);}ngOnDestroy(){var e;(e=this._query)==null||e.unsubscribe();}};r.ɵfac=function(t){return new(t||r)(v(te));},r.ɵcmp=u({type:r,selectors:[["app-container"]],decls:3,vars:2,consts:[[1,"page"],["list","",3,"selected"],["detail","",3,"selected"]],template:function(t,n){t&1&&(a(0,"app-master-detail",0),p(1,"app-container-list",1)(2,"app-container-form",2),_()),t&2&&(s(),l("selected",n.selected),s(),l("selected",n.selected));},dependencies:[fe,ge,de],styles:["[_nghost-%COMP%]{width:100%;height:100%;overflow:hidden}.page[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}"]});let o=r;return o;})();var at=[{component:X,path:"",pathMatch:"full"},{component:X,path:":id"}];export{at as containerRoutes};/**i18n:a8954d4657d2d391fad3e0def8ee5f3664c832ab1fd28b409e53253f04c593f5*/