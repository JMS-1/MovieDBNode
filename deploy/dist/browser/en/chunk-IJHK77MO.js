import{a as N}from"./chunk-74EQGU3B.js";import{a as Q,b as Z,c as te}from"./chunk-GDAMDA2X.js";import{a as ie}from"./chunk-7SXYKM7Q.js";import{A as O,B as d,H as D,I as U,L as h,M as E,N as M,O as _,T as P,U as G,V as X,X as W,aa as j,ba as z,ca as B,da as q,fa as H,g as y,ia as J,j as c,ja as R,k as m,ka as K,la as Y,n as r,na as ee,o as C,p,q as I,r as k,s as v,t as o,u as V,v as l,w as s,x as u,y as F,z as f}from"./chunk-WC7MP575.js";var ne=n=>({disabled:n}),_e=n=>({errors:n}),L=n=>({error:n});function ce(n,w){if(n&1){let e=F();l(0,"div",21),O("click",function(){c(e);let t=d(2);return m(t.onRemove());}),f(1,6),s();}}function me(n,w){if(n&1){let e=F();l(0,"div")(1,"div",8)(2,"div",9),O("click",function(){c(e);let t=d();return m(t.reload());}),f(3,0),s(),l(4,"div",10),O("click",function(){c(e);let t=d();return m(t.onSave());}),f(5,1),s(),v(6,ce,2,0,"div",11),s(),l(7,"div",12)(8,"div",13)(9,"label"),f(10,2),s(),l(11,"semantic-single-select",14),M("selectedChange",function(t){c(e);let a=d();return E(a.parentId,t)||(a.parentId=t),m(t);}),s()(),u(12,"app-validation-errors",15),l(13,"div",16)(14,"label"),f(15,3),s(),l(16,"div",17)(17,"input",18),M("ngModelChange",function(t){c(e);let a=d();return E(a.name,t)||(a.name=t),m(t);}),s()()(),u(18,"app-validation-errors",15),l(19,"div",13)(20,"label"),f(21,4),s(),l(22,"div",17)(23,"textarea",19),M("ngModelChange",function(t){c(e);let a=d();return E(a.description,t)||(a.description=t),m(t);}),s()()(),u(24,"app-validation-errors",15),s(),l(25,"app-semantic-modal",20),O("closed",function(){c(e);let t=d();return m(t.confirm=!1);})("confirm",function(){c(e);let t=d();return m(t.onConfirm());}),f(26,5),s()();}if(n&2){let e=d();r(2),o("ngClass",_(15,ne,!e.edit.isDirty)),r(2),o("ngClass",_(17,ne,!e.edit.isDirty||e.edit.validationErrors)),r(2),o("ngIf",e.editId),r(),o("ngClass",_(19,_e,e.edit.validationErrors)),r(),o("ngClass",_(21,L,e.edit.validationErrors==null?null:e.edit.validationErrors.parentId)),r(3),o("items",e.parentAsItems),h("selected",e.parentId),r(),o("list",e.edit.validationErrors==null?null:e.edit.validationErrors.parentId),r(),o("ngClass",_(23,L,e.edit.validationErrors==null?null:e.edit.validationErrors.name)),r(4),h("ngModel",e.name),r(),o("list",e.edit.validationErrors==null?null:e.edit.validationErrors.name),r(),o("ngClass",_(25,L,e.edit.validationErrors==null?null:e.edit.validationErrors.description)),r(4),h("ngModel",e.description),r(),o("list",e.edit.validationErrors==null?null:e.edit.validationErrors.description),r(),o("show",e.confirm);}}var re=(()=>{class n extends ie{getEditService(){return this._service;}constructor(e){super(),this._service=e,this._map={},this.parentAsItems=[];}reload(){super.reload();let e=new Set(),i=t=>{e.add(t._id);for(let a of t.children||[])i(a);};if(this.editId&&this.editId!=="@"){let t=this._map[this.editId];t&&i(t);}this.parentAsItems=Object.keys(this._map).filter(t=>!e.has(t)).map(t=>this._map[t]).sort((t,a)=>t.fullName.toLocaleLowerCase().localeCompare(a.fullName.toLocaleLowerCase())).map(t=>({key:t._id,text:t.fullName}));}ngOnInit(){super.ngOnInit(),this._all=this._service.map.subscribe(e=>{this._map=e,this.reload();});}ngOnDestroy(){super.ngOnDestroy(),this._all?.unsubscribe();}onSave(){this.edit&&this._service.addOrUpdate(this.editId,this.edit);}onConfirm(){this._service.remove(this.editId),this.confirm=!1;}get name(){return this.edit?.name||"";}set name(e){this.edit&&(this.edit.name=e);}get description(){return this.edit?.description||"";}set description(e){this.edit&&(this.edit.description=e);}get parentId(){return this.edit?.parentId||"";}set parentId(e){this.edit&&(this.edit.parentId=e||void 0);}static{this.ɵfac=function(i){return new(i||n)(C(N));};}static{this.ɵcmp=p({type:n,selectors:[["app-series-form"]],standalone:!1,features:[k],decls:1,vars:1,consts:()=>{let e;e="(none)";let i;i="Cancel";let t;t="Save";let a;a="Parent Series";let S;S="Name";let A;A="Description";let $;$="Deleting a Series can not be undone. Do you really want to delete this Series?";let b;return b="Delete",[i,t,a,S,A,$,b,[4,"ngIf"],[1,"actions"],[1,"ui","button",3,"click","ngClass"],[1,"ui","primary","button",3,"click","ngClass"],["class","ui negative button",3,"click",4,"ngIf"],[1,"ui","form",3,"ngClass"],[1,"field",3,"ngClass"],["hint",e,3,"selectedChange","items","selected"],[3,"list"],[1,"required","field",3,"ngClass"],[1,"ui","input"],["type","text",3,"ngModelChange","ngModel"],["rows","5",3,"ngModelChange","ngModel"],[3,"closed","confirm","show"],[1,"ui","negative","button",3,"click"]];},template:function(i,t){i&1&&v(0,me,27,27,"div",7),i&2&&o("ngIf",t.edit);},dependencies:[P,X,K,j,z,B,Y,ee],styles:["[_nghost-%COMP%]{width:100%;height:100%;padding-right:.5em;overflow:auto}"]});}}return n;})();var fe=n=>["/series",n],oe=(()=>{class n{constructor(){this.series=void 0;}static{this.ɵfac=function(i){return new(i||n)();};}static{this.ɵcmp=p({type:n,selectors:[["app-series-item"]],inputs:{series:"series"},standalone:!1,decls:2,vars:4,consts:[[1,"item",3,"routerLink"]],template:function(i,t){i&1&&(l(0,"div",0),D(1),s()),i&2&&(o("routerLink",_(2,fe,t.series._id)),r(),U(t.series.name));},dependencies:[J],styles:["[_nghost-%COMP%]{overflow:hidden}.item[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"]});}}return n;})();var Se=n=>({active:n});function Ce(n,w){if(n&1&&u(0,"app-series-item",4),n&2){let e=w.$implicit,i=d();V("margin-left: "+e.level+"em"),o("ngClass",_(4,Se,e._id===i.selected))("series",e);}}var se=(()=>{class n{constructor(e){this._service=e,this.selected="",this.items=[],this.all=[],this._map={},this._filter="";}ngOnInit(){this._query=this._service.map.subscribe(e=>{this._map=e,this.all=Object.keys(e).map(i=>e[i]).sort((i,t)=>i.fullName.toLocaleLowerCase().localeCompare(t.fullName.toLocaleLowerCase())),this.refreshFilter();});}get filter(){return this._filter;}set filter(e){this._filter=e,this.refreshFilter();}refreshFilter(){let e=(this._filter||"").toLocaleLowerCase(),i=new Set(this.all.filter(t=>!e||t.fullName.toLocaleLowerCase().indexOf(e)>=0).map(t=>t._id));for(let t of Array.from(i))for(;;){let a=this._map[t];if(!a)break;i.add(t),t=a.parentId||"";}this.items=this.all.filter(t=>i.has(t._id));}ngOnDestroy(){this._query?.unsubscribe();}static{this.ɵfac=function(i){return new(i||n)(C(N));};}static{this.ɵcmp=p({type:n,selectors:[["app-series-list"]],inputs:{selected:"selected"},standalone:!1,decls:4,vars:3,consts:()=>{let e;return e="Search...",[[1,"complete"],["hint",e,3,"textChange","text","clearable"],[1,"ui","selection","list"],["class","item",3,"ngClass","series","style",4,"ngFor","ngForOf"],[1,"item",3,"ngClass","series"]];},template:function(i,t){i&1&&(l(0,"div",0)(1,"semantic-search",1),M("textChange",function(S){return E(t.filter,S)||(t.filter=S),S;}),s(),l(2,"div",2),v(3,Ce,1,6,"app-series-item",3),s()()),i&2&&(r(),h("text",t.filter),o("clearable",!0),r(2),o("ngForOf",t.items));},dependencies:[P,G,Z,oe],styles:["[_nghost-%COMP%]{width:100%;height:100%;overflow:auto}.complete[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto 1fr;height:100%;overflow:hidden}.complete[_ngcontent-%COMP%] > .ui.list[_ngcontent-%COMP%]{row-gap:10em;padding:.5em;overflow:auto;background:#fff}.complete[_ngcontent-%COMP%] > .ui.list[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%] + .item[_ngcontent-%COMP%]{margin-top:.5em}.complete[_ngcontent-%COMP%] > .ui.list[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]:not(.active):not(:hover){color:#666;background:#ddd}"]});}}return n;})();var x=(()=>{class n{constructor(e){this._route=e,this.selected="";}ngOnInit(){this._query=this._route.params.subscribe(e=>this.selected=e.id);}ngOnDestroy(){this._query?.unsubscribe();}static{this.ɵfac=function(i){return new(i||n)(C(H));};}static{this.ɵcmp=p({type:n,selectors:[["app-series"]],standalone:!1,decls:3,vars:2,consts:[[1,"page"],["list","",3,"selected"],["detail","",3,"selected"]],template:function(i,t){i&1&&(l(0,"app-master-detail",0),u(1,"app-series-list",1)(2,"app-series-form",2),s()),i&2&&(r(),o("selected",t.selected),r(),o("selected",t.selected));},dependencies:[Q,re,se],styles:["[_nghost-%COMP%]{width:100%;height:100%;overflow:hidden}.page[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}"]});}}return n;})();var Ee=[{component:x,path:"",pathMatch:"full"},{component:x,path:":id"}],ae=(()=>{class n{static{this.ɵfac=function(i){return new(i||n)();};}static{this.ɵmod=I({type:n});}static{this.ɵinj=y({imports:[R.forChild(Ee),R]});}}return n;})();var ze=(()=>{class n{static{this.ɵfac=function(i){return new(i||n)();};}static{this.ɵmod=I({type:n});}static{this.ɵinj=y({imports:[W,te,R,q,ae]});}}return n;})();export{ze as SeriesModule};/**i18n:89832ca10e07b9b22f7f6c4347886c9b71cd69873c1434137d79347a92194613*/