import{a as P}from"./chunk-MCWPWR32.js";import{a as H}from"./chunk-MC4SG33P.js";import{a as J}from"./chunk-57ALTTQC.js";import{a as Z}from"./chunk-M5RA6FRI.js";import{a as K,b as Q,c as Y}from"./chunk-Q3XM6DP4.js";import{a as z,b as B,c as j,d as q}from"./chunk-NRD4YDIC.js";import{A as b,B as R,E as l,G as k,I as d,J as a,K as g,L as w,M as S,N as T,O as _,U as V,V as D,Y as M,Z as v,_ as O,aa as c,la as y,ma as U,n as m,na as G,o as u,qa as I,u as s,va as X,w as E,x as f,ya as W}from"./chunk-5HCCPM3E.js";var re=r=>["/series",r],ee=(()=>{let o=class o{constructor(){this.series=void 0;}};o.ɵfac=function(t){return new(t||o)();},o.ɵcmp=f({type:o,selectors:[["app-series-item"]],inputs:{series:"series"},decls:2,vars:4,consts:[[1,"item",3,"routerLink"]],template:function(t,i){t&1&&(d(0,"div",0),V(1),a()),t&2&&(l("routerLink",c(2,re,i.series._id)),s(),D(i.series.name));},dependencies:[W],styles:["[_nghost-%COMP%]{overflow:hidden}.item[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"]});let r=o;return r;})();var le=r=>({active:r});function ae(r,o){if(r&1&&g(0,"app-series-item",4),r&2){let n=o.$implicit,e=_();k("margin-left: "+n.level+"em"),l("ngClass",c(4,le,n._id===e.selected))("series",n);}}var te=(()=>{let o=class o{constructor(e){this._service=e,this.selected="",this.items=[],this.all=[],this._map={},this._filter="";}ngOnInit(){this._query=this._service.map.subscribe(e=>{this._map=e,this.all=Object.keys(e).map(t=>e[t]).sort((t,i)=>t.fullName.toLocaleLowerCase().localeCompare(i.fullName.toLocaleLowerCase())),this.refreshFilter();});}get filter(){return this._filter;}set filter(e){this._filter=e,this.refreshFilter();}refreshFilter(){let e=(this._filter||"").toLocaleLowerCase(),t=new Set(this.all.filter(i=>!e||i.fullName.toLocaleLowerCase().indexOf(e)>=0).map(i=>i._id));for(let i of Array.from(t))for(;;){let p=this._map[i];if(!p)break;t.add(i),i=p.parentId||"";}this.items=this.all.filter(i=>t.has(i._id));}ngOnDestroy(){var e;(e=this._query)==null||e.unsubscribe();}};o.ɵfac=function(t){return new(t||o)(E(P));},o.ɵcmp=f({type:o,selectors:[["app-series-list"]],inputs:{selected:"selected"},decls:4,vars:3,consts:()=>{let e;return e="Search...",[[1,"complete"],["hint",e,3,"textChange","text","clearable"],[1,"ui","selection","list"],["class","item",3,"ngClass","series","style",4,"ngFor","ngForOf"],[1,"item",3,"ngClass","series"]];},template:function(t,i){t&1&&(d(0,"div",0)(1,"semantic-search",1),O("textChange",function(h){return v(i.filter,h)||(i.filter=h),h;}),a(),d(2,"div",2),R(3,ae,1,6,"app-series-item",3),a()()),t&2&&(s(),M("text",i.filter),l("clearable",!0),s(2),l("ngForOf",i.items));},dependencies:[H,I,y,U,ee],styles:["[_nghost-%COMP%]{width:100%;height:100%;overflow:auto}.complete[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto 1fr;height:100%;overflow:hidden}.complete[_ngcontent-%COMP%] > .ui.list[_ngcontent-%COMP%]{row-gap:10em;padding:.5em;overflow:auto;background:#fff}.complete[_ngcontent-%COMP%] > .ui.list[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%] + .item[_ngcontent-%COMP%]{margin-top:.5em}.complete[_ngcontent-%COMP%] > .ui.list[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]:not(.active):not(:hover){color:#666;background:#ddd}"]});let r=o;return r;})();var ie=r=>({disabled:r}),de=r=>({errors:r}),F=r=>({error:r});function _e(r,o){if(r&1){let n=w();d(0,"div",21),T("click",function(){m(n);let t=_(2);return u(t.onRemove());}),S(1,6),a();}}function ce(r,o){if(r&1){let n=w();d(0,"div")(1,"div",8)(2,"div",9),T("click",function(){m(n);let t=_();return u(t.reload());}),S(3,0),a(),d(4,"div",10),T("click",function(){m(n);let t=_();return u(t.onSave());}),S(5,1),a(),R(6,_e,2,0,"div",11),a(),d(7,"div",12)(8,"div",13)(9,"label"),S(10,2),a(),d(11,"semantic-single-select",14),O("selectedChange",function(t){m(n);let i=_();return v(i.parentId,t)||(i.parentId=t),u(t);}),a()(),g(12,"app-validation-errors",15),d(13,"div",16)(14,"label"),S(15,3),a(),d(16,"div",17)(17,"input",18),O("ngModelChange",function(t){m(n);let i=_();return v(i.name,t)||(i.name=t),u(t);}),a()()(),g(18,"app-validation-errors",15),d(19,"div",13)(20,"label"),S(21,4),a(),d(22,"div",17)(23,"textarea",19),O("ngModelChange",function(t){m(n);let i=_();return v(i.description,t)||(i.description=t),u(t);}),a()()(),g(24,"app-validation-errors",15),a(),d(25,"app-semantic-modal",20),T("closed",function(){m(n);let t=_();return u(t.confirm=!1);})("confirm",function(){m(n);let t=_();return u(t.onConfirm());}),S(26,5),a()();}if(r&2){let n=_();s(2),l("ngClass",c(15,ie,!n.edit.isDirty)),s(2),l("ngClass",c(17,ie,!n.edit.isDirty||n.edit.validationErrors)),s(2),l("ngIf",n.editId),s(),l("ngClass",c(19,de,n.edit.validationErrors)),s(),l("ngClass",c(21,F,n.edit.validationErrors==null?null:n.edit.validationErrors.parentId)),s(3),l("items",n.parentAsItems),M("selected",n.parentId),s(),l("list",n.edit.validationErrors==null?null:n.edit.validationErrors.parentId),s(),l("ngClass",c(23,F,n.edit.validationErrors==null?null:n.edit.validationErrors.name)),s(4),M("ngModel",n.name),s(),l("list",n.edit.validationErrors==null?null:n.edit.validationErrors.name),s(),l("ngClass",c(25,F,n.edit.validationErrors==null?null:n.edit.validationErrors.description)),s(4),M("ngModel",n.description),s(),l("list",n.edit.validationErrors==null?null:n.edit.validationErrors.description),s(),l("show",n.confirm);}}var ne=(()=>{let o=class o extends K{getEditService(){return this._service;}constructor(e){super(),this._service=e,this._map={},this.parentAsItems=[];}reload(){super.reload();let e=new Set(),t=i=>{e.add(i._id);for(let p of i.children||[])t(p);};if(this.editId&&this.editId!=="@"){let i=this._map[this.editId];i&&t(i);}this.parentAsItems=Object.keys(this._map).filter(i=>!e.has(i)).map(i=>this._map[i]).sort((i,p)=>i.fullName.toLocaleLowerCase().localeCompare(p.fullName.toLocaleLowerCase())).map(i=>({key:i._id,text:i.fullName}));}ngOnInit(){super.ngOnInit(),this._all=this._service.map.subscribe(e=>{this._map=e,this.reload();});}ngOnDestroy(){var e;super.ngOnDestroy(),(e=this._all)==null||e.unsubscribe();}onSave(){this.edit&&this._service.addOrUpdate(this.editId,this.edit);}onConfirm(){this._service.remove(this.editId),this.confirm=!1;}get name(){var e;return((e=this.edit)==null?void 0:e.name)||"";}set name(e){this.edit&&(this.edit.name=e);}get description(){var e;return((e=this.edit)==null?void 0:e.description)||"";}set description(e){this.edit&&(this.edit.description=e);}get parentId(){var e;return((e=this.edit)==null?void 0:e.parentId)||"";}set parentId(e){this.edit&&(this.edit.parentId=e||void 0);}};o.ɵfac=function(t){return new(t||o)(E(P));},o.ɵcmp=f({type:o,selectors:[["app-series-form"]],features:[b],decls:1,vars:1,consts:()=>{let e;e="(none)";let t;t="Cancel";let i;i="Save";let p;p="Parent Series";let h;h="Name";let L;L="Description";let A;A="Deleting a Series can not be undone. Do you really want to delete this Series?";let $;return $="Delete",[t,i,p,h,L,A,$,[4,"ngIf"],[1,"actions"],[1,"ui","button",3,"click","ngClass"],[1,"ui","primary","button",3,"click","ngClass"],["class","ui negative button",3,"click",4,"ngIf"],[1,"ui","form",3,"ngClass"],[1,"field",3,"ngClass"],["hint",e,3,"selectedChange","items","selected"],[3,"list"],[1,"required","field",3,"ngClass"],[1,"ui","input"],["type","text",3,"ngModelChange","ngModel"],["rows","5",3,"ngModelChange","ngModel"],[3,"closed","confirm","show"],[1,"ui","negative","button",3,"click"]];},template:function(t,i){t&1&&R(0,ce,27,27,"div",7),t&2&&l("ngIf",i.edit);},dependencies:[I,y,G,Q,q,z,B,j,Y,J],styles:["[_nghost-%COMP%]{width:100%;height:100%;padding-right:.5em;overflow:auto}"]});let r=o;return r;})();var x=(()=>{let o=class o{constructor(e){this._route=e,this.selected="";}ngOnInit(){this._query=this._route.params.subscribe(e=>this.selected=e.id);}ngOnDestroy(){var e;(e=this._query)==null||e.unsubscribe();}};o.ɵfac=function(t){return new(t||o)(E(X));},o.ɵcmp=f({type:o,selectors:[["app-series"]],decls:3,vars:2,consts:[[1,"page"],["list","",3,"selected"],["detail","",3,"selected"]],template:function(t,i){t&1&&(d(0,"app-master-detail",0),g(1,"app-series-list",1)(2,"app-series-form",2),a()),t&2&&(s(),l("selected",i.selected),s(),l("selected",i.selected));},dependencies:[Z,te,ne],styles:["[_nghost-%COMP%]{width:100%;height:100%;overflow:hidden}.page[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}"]});let r=o;return r;})();var xe=[{component:x,path:"",pathMatch:"full"},{component:x,path:":id"}];export{xe as seriesRoutes};/**i18n:a8954d4657d2d391fad3e0def8ee5f3664c832ab1fd28b409e53253f04c593f5*/