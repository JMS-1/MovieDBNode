import{a as D}from"./chunk-CCD23IP2.js";import{c as f}from"./chunk-R2SI53E2.js";import{a as le}from"./chunk-ALWOFVYR.js";import{a as _e}from"./chunk-QL7K34UP.js";import{a as me}from"./chunk-S3L7YZ2G.js";import{a as ce,b as de,c as pe}from"./chunk-HPNX3AMC.js";import{a as oe,b as re,c as ae,d as se}from"./chunk-DXHUZ2OR.js";import{$ as ne,B as H,Ca as G,E as x,F,I as b,J as U,K as _,L as a,M as l,N as p,O as V,P as m,Q as I,R as C,U as J,V as Z,W as ee,Y as te,Z as w,_ as k,ba as h,ca as N,da as R,fa as u,m as S,n as M,p as Q,qa as P,t as s,ua as v,v as y,w as g,z as K,za as ie}from"./chunk-R44RXE5L.js";var Se={[f.Box]:"briefcase",[f.Disk]:"hdd",[f.FeatureSet]:"zip",[f.Folder]:"folder",[f.Shelf]:"building",[f.Undefined]:"help"},X=(()=>{let o=class o{constructor(){this.type=f.Undefined;}get iconType(){return Se[this.type]||"help";}};o.ɵfac=function(t){return new(t||o)();},o.ɵcmp=g({type:o,selectors:[["app-container-icon"]],inputs:{type:"type"},decls:1,vars:1,consts:[[1,"ui","icon",3,"ngClass"]],template:function(t,n){t&1&&p(0,"i",0),t&2&&_("ngClass",n.iconType);},dependencies:[v,P],encapsulation:2});let r=o;return r;})();var Me=r=>["/containers",r],ue=(()=>{let o=class o{constructor(){this.container=void 0;}};o.ɵfac=function(t){return new(t||o)();},o.ɵcmp=g({type:o,selectors:[["app-container-item"]],inputs:{container:"container"},decls:4,vars:5,consts:[[1,"item",3,"routerLink"],[3,"type"],[1,"content"]],template:function(t,n){t&1&&(a(0,"div",0),p(1,"app-container-icon",1),a(2,"div",2),w(3),l()()),t&2&&(_("routerLink",u(3,Me,n.container._id)),s(),_("type",n.container.type),s(2),k(n.container.name));},dependencies:[G,X],styles:["[_nghost-%COMP%]{overflow:hidden}.item[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;align-items:center;overflow:hidden}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"]});let r=o;return r;})();var he=r=>({active:r}),Ne=(r,o)=>o._id;function Re(r,o){if(r&1&&p(0,"app-container-item",4),r&2){let i=o.$implicit,e=C();te("margin-left: "+i.level+"em"),_("ngClass",u(4,he,i._id===e.selected))("container",i);}}var ge=(()=>{let o=class o{constructor(e){this._service=e,this.selected="",this.items=[],this.map={},this.all=[],this._filter="";}ngOnInit(){this._query=this._service.map.subscribe(e=>{let t=Object.keys(e).map(d=>e[d]).filter(d=>!d.parentId||!e[d.parentId]);t.sort((d,E)=>(d.name||d._id).toLocaleLowerCase().localeCompare((E.name||E._id).toLocaleLowerCase()));let n=[],c=d=>{var E;n.push(d),(E=d.children)==null||E.forEach(c);};t.forEach(c),this.all=n,this.map=e,this.refreshFilter();});}get filter(){return this._filter;}set filter(e){this._filter=e,this.refreshFilter();}refreshFilter(){let e=(this._filter||"").toLocaleLowerCase(),t=new Set(this.all.filter(n=>!e||(n.fullName||n.name||n._id).toLocaleLowerCase().indexOf(e)>=0).map(n=>n._id));for(let n of Array.from(t))for(;;){let c=this.map[n];if(!c)break;t.add(n),n=c.parentId||"";}this.items=this.all.filter(n=>t.has(n._id));}ngOnDestroy(){var e;(e=this._query)==null||e.unsubscribe();}};o.ɵfac=function(t){return new(t||o)(y(D));},o.ɵcmp=g({type:o,selectors:[["app-container-list"]],inputs:{selected:"selected"},decls:5,vars:2,consts:()=>{let e;return e="Search...",[[1,"complete"],["hint",e,3,"textChange","text","clearable"],[1,"ui","selection","list"],[1,"item",3,"ngClass","container","style"],[1,"item",3,"ngClass","container"]];},template:function(t,n){t&1&&(a(0,"div",0)(1,"semantic-search",1),R("textChange",function(d){return N(n.filter,d)||(n.filter=d),d;}),l(),a(2,"div",2),b(3,Re,1,6,"app-container-item",3,Ne),l()()),t&2&&(s(),h("text",n.filter),_("clearable",!0),s(2),U(n.items));},dependencies:[le,ue,v,P],styles:["[_nghost-%COMP%]{width:100%;height:100%;overflow:auto}.complete[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto 1fr;height:100%;overflow:hidden}.complete[_ngcontent-%COMP%] > .ui.list[_ngcontent-%COMP%]{row-gap:10em;padding:.5em;overflow:auto;background:#fff}.complete[_ngcontent-%COMP%] > .ui.list[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%] + .item[_ngcontent-%COMP%]{margin-top:.5em}.complete[_ngcontent-%COMP%] > .ui.list[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]:not(.active):not(:hover){color:#666;background:#ddd}"]});let r=o;return r;})();var ye=["selector"],fe=(()=>{let o=class o{constructor(){this.selected=f.Undefined,this.selectedChange=new H();}setSelected(e){var t,n;(n=$((t=this.selector)==null?void 0:t.nativeElement))==null||n.dropdown("set exactly",typeof e=="number"?`${e}`:[]);}ngAfterViewInit(){var t;let e=$((t=this.selector)==null?void 0:t.nativeElement);e.dropdown({forceSelection:!1,onChange:n=>this.selectedChange.emit(parseInt(n,10))}),setTimeout(()=>{this.setSelected(this.selected),e.css("visibility","");},100);}ngOnChanges(e){let t=e.selected;t&&this.setSelected(t.currentValue);}ngOnDestroy(){var e,t;(t=$((e=this.selector)==null?void 0:e.nativeElement))==null||t.dropdown("destroy");}};o.ɵfac=function(t){return new(t||o)();},o.ɵcmp=g({type:o,selectors:[["app-component-type"]],viewQuery:function(t,n){if(t&1&&J(ye,5),t&2){let c;Z(c=ee())&&(n.selector=c.first);}},inputs:{selected:"selected"},outputs:{selectedChange:"selectedChange"},features:[Q],decls:29,vars:6,consts:()=>{let e;e="(unknown)";let t;t="Small Box";let n;n="Large Box";let c;c="Shelf";let d;d="Folder";let E;return E="(External) Harddisk",[["selector",""],e,t,n,c,d,E,[1,"ui","selection","dropdown",2,"visibility","hidden"],[1,"dropdown","icon"],[1,"default","text"],[1,"menu"],["data-value","0",1,"item"],[3,"type"],["data-value","1",1,"item"],["data-value","2",1,"item"],["data-value","3",1,"item"],["data-value","5",1,"item"],["data-value","4",1,"item"]];},template:function(t,n){t&1&&(a(0,"div",7,0),p(2,"i",8)(3,"div",9),a(4,"div",10)(5,"div",11),p(6,"app-container-icon",12),a(7,"span"),m(8,1),l()(),a(9,"div",13),p(10,"app-container-icon",12),a(11,"span"),m(12,2),l()(),a(13,"div",14),p(14,"app-container-icon",12),a(15,"span"),m(16,3),l()(),a(17,"div",15),p(18,"app-container-icon",12),a(19,"span"),m(20,4),l()(),a(21,"div",16),p(22,"app-container-icon",12),a(23,"span"),m(24,5),l()(),a(25,"div",17),p(26,"app-container-icon",12),a(27,"span"),m(28,6),l()()()()),t&2&&(s(6),_("type",0),s(4),_("type",1),s(4),_("type",2),s(4),_("type",3),s(4),_("type",5),s(4),_("type",4));},dependencies:[X],styles:[".ui.selection.dropdown[_ngcontent-%COMP%] > .text[_ngcontent-%COMP%]{width:12em}"]});let r=o;return r;})();var Ee=r=>({disabled:r}),Pe=r=>({errors:r}),L=r=>({error:r}),ve=r=>["/recordings",r,"EDIT"],Ae=(r,o)=>o._id;function Ie(r,o){if(r&1){let i=V();a(0,"div",26),I("click",function(){S(i);let t=C(2);return M(t.onRemove());}),m(1,8),l();}}function we(r,o){if(r&1&&(a(0,"tr",27)(1,"td"),w(2),l(),a(3,"td",28),w(4),l()()),r&2){let i=o.$implicit;_("routerLink",u(3,ve,i._id)),s(2),k(i.fullName),s(2),ne(" ",i.containerPosition," ");}}function $e(r,o){if(r&1&&(a(0,"table",24)(1,"thead")(2,"tr")(3,"th"),m(4,9),l(),a(5,"th"),m(6,10),l()()(),a(7,"tbody"),b(8,we,5,5,"tr",27,Ae),l()()),r&2){let i=C(2);s(8),U(i.contents);}}function Le(r,o){if(r&1){let i=V();a(0,"div")(1,"div",11)(2,"div",12),I("click",function(){S(i);let t=C();return M(t.reload());}),m(3,0),l(),a(4,"div",13),I("click",function(){S(i);let t=C();return M(t.onSave());}),m(5,1),l(),x(6,Ie,2,0,"div",14),l(),a(7,"div",15)(8,"div",16)(9,"label"),m(10,2),l(),a(11,"semantic-single-select",17),R("selectedChange",function(t){S(i);let n=C();return N(n.parentId,t)||(n.parentId=t),M(t);}),l()(),p(12,"app-validation-errors",18),a(13,"div",19)(14,"label"),m(15,3),l(),a(16,"div",20)(17,"input",21),R("ngModelChange",function(t){S(i);let n=C();return N(n.name,t)||(n.name=t),M(t);}),l()()(),p(18,"app-validation-errors",18),a(19,"div",19)(20,"label"),m(21,4),l(),a(22,"app-component-type",22),R("selectedChange",function(t){S(i);let n=C();return N(n.type,t)||(n.type=t),M(t);}),l()(),p(23,"app-validation-errors",18),a(24,"div",16)(25,"label"),m(26,5),l(),a(27,"div",20)(28,"textarea",23),R("ngModelChange",function(t){S(i);let n=C();return N(n.description,t)||(n.description=t),M(t);}),l()()(),p(29,"app-validation-errors",18),a(30,"div",16)(31,"label"),m(32,6),l(),a(33,"div",20)(34,"input",21),R("ngModelChange",function(t){S(i);let n=C();return N(n.parentLocation,t)||(n.parentLocation=t),M(t);}),l()()(),p(35,"app-validation-errors",18),l(),x(36,$e,10,0,"table",24),a(37,"app-semantic-modal",25),I("closed",function(){S(i);let t=C();return M(t.confirm=!1);})("confirm",function(){S(i);let t=C();return M(t.onConfirm());}),m(38,7),l()();}if(r&2){let i=C();s(2),_("ngClass",u(22,Ee,!i.edit.isDirty)),s(2),_("ngClass",u(24,Ee,!i.edit.isDirty||i.edit.validationErrors)),s(2),F(i.editId?6:-1),s(),_("ngClass",u(26,Pe,i.edit.validationErrors)),s(),_("ngClass",u(28,L,i.edit.validationErrors==null?null:i.edit.validationErrors.parentId)),s(3),_("items",i.parentAsItems),h("selected",i.parentId),s(),_("list",i.edit.validationErrors==null?null:i.edit.validationErrors.parentId),s(),_("ngClass",u(30,L,i.edit.validationErrors==null?null:i.edit.validationErrors.name)),s(4),h("ngModel",i.name),s(),_("list",i.edit.validationErrors==null?null:i.edit.validationErrors.name),s(),_("ngClass",u(32,L,i.edit.validationErrors==null?null:i.edit.validationErrors.type)),s(3),h("selected",i.type),s(),_("list",i.edit.validationErrors==null?null:i.edit.validationErrors.type),s(),_("ngClass",u(34,L,i.edit.validationErrors==null?null:i.edit.validationErrors.description)),s(4),h("ngModel",i.description),s(),_("list",i.edit.validationErrors==null?null:i.edit.validationErrors.description),s(),_("ngClass",u(36,L,i.edit.validationErrors==null?null:i.edit.validationErrors.parentLocation)),s(4),h("ngModel",i.parentLocation),s(),_("list",i.edit.validationErrors==null?null:i.edit.validationErrors.parentLocation),s(),F(i.contents.length>0?36:-1),s(),_("show",i.confirm);}}var Te=(()=>{let o=class o extends ce{getEditService(){return this._service;}constructor(e){super(),this._service=e,this._map={},this.contents=[],this.parentAsItems=[];}reload(){super.reload();let e=this._contents;e&&(this._contents=void 0,e.unsubscribe()),this.contents=[];let t=new Set(),n=c=>{t.add(c._id);for(let d of c.children||[])n(d);};if(this.editId&&this.editId!=="@"){let c=this._map[this.editId];c&&n(c),this._contents=this._service.getContents(this.editId).subscribe(d=>this.contents=d);}this.parentAsItems=Object.keys(this._map).filter(c=>!t.has(c)).map(c=>this._map[c]).sort((c,d)=>c.fullName.toLocaleLowerCase().localeCompare(d.fullName.toLocaleLowerCase())).map(c=>({key:c._id,text:c.fullName}));}ngOnInit(){super.ngOnInit(),this._all=this._service.map.subscribe(e=>{this._map=e,this.reload();});}ngOnDestroy(){var e,t;super.ngOnDestroy(),(e=this._all)==null||e.unsubscribe(),(t=this._contents)==null||t.unsubscribe();}onSave(){this.edit&&this._service.addOrUpdate(this.editId,this.edit);}onConfirm(){this._service.remove(this.editId),this.confirm=!1;}get name(){var e;return((e=this.edit)==null?void 0:e.name)||"";}set name(e){this.edit&&(this.edit.name=e);}get description(){var e;return((e=this.edit)==null?void 0:e.description)||"";}set description(e){this.edit&&(this.edit.description=e);}get parentId(){var e;return((e=this.edit)==null?void 0:e.parentId)||"";}set parentId(e){this.edit&&(this.edit.parentId=e||void 0);}get parentLocation(){var e;return((e=this.edit)==null?void 0:e.parentLocation)||"";}set parentLocation(e){this.edit&&(this.edit.parentLocation=e);}get type(){var e;return((e=this.edit)==null?void 0:e.type)??f.Undefined;}set type(e){this.edit&&(this.edit.type=e);}};o.ɵfac=function(t){return new(t||o)(y(D));},o.ɵcmp=g({type:o,selectors:[["app-container-form"]],features:[K],decls:1,vars:1,consts:()=>{let e;e="(none)";let t;t="Cancel";let n;n="Save";let c;c="Parent Storage";let d;d="Name";let E;E="Type of Storage";let O;O="Description";let W;W="Location in Parent Storage";let B;B="Deleting a Storage can not be undone. Do you really want to delete this Storage?";let Y;Y="Delete";let q;q="Recording";let j;return j="Position",[t,n,c,d,E,O,W,B,Y,q,j,[1,"actions"],[1,"ui","button",3,"click","ngClass"],[1,"ui","primary","button",3,"click","ngClass"],[1,"ui","negative","button"],[1,"ui","form",3,"ngClass"],[1,"field",3,"ngClass"],["hint",e,3,"selectedChange","items","selected"],[3,"list"],[1,"required","field",3,"ngClass"],[1,"ui","input"],["type","text",3,"ngModelChange","ngModel"],[3,"selectedChange","selected"],["rows","5",3,"ngModelChange","ngModel"],[1,"ui","celled","collapsing","fixed","striped","unstackable","compact","table","contents"],[3,"closed","confirm","show"],[1,"ui","negative","button",3,"click"],[3,"routerLink"],[2,"text-align","center"]];},template:function(t,n){t&1&&x(0,Le,39,38,"div"),t&2&&F(n.edit?0:-1);},dependencies:[v,P,fe,de,se,oe,re,ae,pe,G,_e],styles:["[_nghost-%COMP%]{width:100%;height:100%;padding-right:.5em;overflow:auto}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{cursor:pointer}"]});let r=o;return r;})();var z=(()=>{let o=class o{constructor(e){this._route=e,this.selected="";}ngOnInit(){this._query=this._route.params.subscribe(e=>this.selected=e.id);}ngOnDestroy(){var e;(e=this._query)==null||e.unsubscribe();}};o.ɵfac=function(t){return new(t||o)(y(ie));},o.ɵcmp=g({type:o,selectors:[["app-container"]],decls:3,vars:2,consts:[[1,"page"],["list","",3,"selected"],["detail","",3,"selected"]],template:function(t,n){t&1&&(a(0,"app-master-detail",0),p(1,"app-container-list",1)(2,"app-container-form",2),l()),t&2&&(s(),_("selected",n.selected),s(),_("selected",n.selected));},dependencies:[Te,ge,me],styles:["[_nghost-%COMP%]{width:100%;height:100%;overflow:hidden}.page[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}"]});let r=o;return r;})();var ct=[{component:z,path:"",pathMatch:"full"},{component:z,path:":id"}];export{ct as containerRoutes};/**i18n:ca2b98f88e038f658fd3a013647fb90822f69a47c44668dd041b701a047489a6*/