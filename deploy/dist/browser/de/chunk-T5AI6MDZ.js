import{c as _}from"./chunk-SM2QXII6.js";import{a as ie}from"./chunk-ETKFAWKA.js";import{a as z}from"./chunk-XL4LZPT7.js";import{a as X}from"./chunk-2N52HPMR.js";import{b as ee,c as te}from"./chunk-TAHFQH5W.js";import{A as M,B as u,C as y,I as p,J as O,L as V,M as S,N as E,O as R,P as q,Q as x,R as k,S as K,T as Q,U as v,V as P,W as H,X as J,Y as T,e as U,g as L,j as b,ja as Y,k as G,ka as A,n as d,na as Z,o as c,oa as I,p as g,q as $,s as C,t as s,v as W,w as o,x as r,y as h,z as D}from"./chunk-QWA7TTEO.js";var fe=["recording",""],Ce=(i,a)=>({visible:i,half:a});function he(i,a){if(i&1&&h(0,"i",2),i&2){let e=y();s("title",e.rent);}}function Se(i,a){if(i&1&&h(0,"i",4),i&2){let e=a.$implicit,t=y(2);s("ngClass",x(1,Ce,t.item.rating>=e,t.item.rating==e));}}function Ee(i,a){if(i&1&&(o(0,"div",1),C(1,Se,1,4,"i",3),r()),i&2){let e=y();d(),s("ngForOf",e.stars);}}function Re(i,a){i&1&&p(0," \xA0 ");}var ne=(()=>{class i{constructor(e,t){this._languages=e,this._genres=t,this.languages="",this.genres="",this.stars=[1,3,5,7,9];}get rent(){return this.item.rentTo||"";}ngOnInit(){this._genreQuery=this._genres.map.subscribe(e=>{this.genres=(this.item.genres||[]).map(t=>e[t]?.name||t).sort().join(", ")||"\xA0";}),this._languageQuery=this._languages.map.subscribe(e=>{this.languages=(this.item.languages||[]).map(t=>e[t]?.name||t).sort().join(", ")||"\xA0";});}ngOnDestroy(){this._languageQuery?.unsubscribe(),this._genreQuery?.unsubscribe();}static{this.ɵfac=function(t){return new(t||i)(c(z),c(X));};}static{this.ɵcmp=g({type:i,selectors:[["","recording",""]],inputs:{item:"item"},attrs:fe,decls:18,vars:9,consts:[["class","ui icon user outline",3,"title",4,"ngIf"],[1,"rating"],[1,"ui","icon","user","outline",3,"title"],["class","ui icon star",3,"ngClass",4,"ngFor","ngForOf"],[1,"ui","icon","star",3,"ngClass"]],template:function(t,n){t&1&&(o(0,"td")(1,"div")(2,"div"),p(3),r(),C(4,he,1,1,"i",0),r()(),o(5,"td"),C(6,Ee,2,1,"div",1)(7,Re,1,0),r(),o(8,"td")(9,"div"),p(10),K(11,"date"),r()(),o(12,"td")(13,"div"),p(14),r()(),o(15,"td")(16,"div"),p(17),r()()),t&2&&(d(3),O(n.item.fullName),d(),s("ngIf",!!n.rent),d(2),W(n.item.rating?6:7),d(4),O(Q(11,6,n.item.created,"dd.MM.yyyy HH:mm:ss")),d(4),O(n.languages),d(3),O(n.genres));},dependencies:[T,v,P,H,J],styles:["td[_ngcontent-%COMP%]{padding:0 .5em;cursor:pointer}td[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}td[_ngcontent-%COMP%]:nth-child(1){width:40em;min-width:40em;max-width:40em}td[_ngcontent-%COMP%]:nth-child(1) > div[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;column-gap:.5em;align-items:center}td[_ngcontent-%COMP%]:nth-child(2){display:grid;grid-auto-flow:column;align-items:center;justify-content:center;width:10em;min-width:10em;max-width:10em}td[_ngcontent-%COMP%]:nth-child(2)   i[_ngcontent-%COMP%]{visibility:hidden}td[_ngcontent-%COMP%]:nth-child(2)   i.visible[_ngcontent-%COMP%]{visibility:unset}td[_ngcontent-%COMP%]:nth-child(3){width:12em;min-width:12em;max-width:12em}td[_ngcontent-%COMP%]:nth-child(4), td[_ngcontent-%COMP%]:nth-child(5){width:20em;min-width:20em;max-width:20em}"]});}}return i;})();var B=(i,a,e)=>({sorted:i,ascending:a,descending:e}),Te=i=>["/recordings",i,"EDIT"];function Me(i,a){if(i&1&&h(0,"tr",8),i&2){let e=a.$implicit;s("item",e)("routerLink",q(2,Te,e._id));}}var re=(()=>{class i{get items(){return this._result.view;}constructor(e){this._service=e,this._result={correlationId:"",count:0,genres:[],languages:[],total:0,view:[]};}ngOnInit(){this._query=this._service.result.subscribe(e=>this._result=e);}ngOnDestroy(){this._query?.unsubscribe();}sort(e){this._service.sort(e);}get ascending(){return this._service.sortOrder==="Ascending";}get sortName(){return this._service.sortColumn==="fullName";}get sortDate(){return this._service.sortColumn==="created";}get sortRating(){return this._service.sortColumn==="rating";}static{this.ɵfac=function(t){return new(t||i)(c(_));};}static{this.ɵcmp=g({type:i,selectors:[["app-recording-table"]],decls:17,vars:16,consts:()=>{let e;e=" Name ";let t;t=" Bewertung ";let n;n=" Erstellt ";let m;m="Sprachen";let l;return l="Kategorien",[e,t,n,m,l,[1,"ui","celled","collapsing","fixed","sortable","striped","unstackable","compact","table"],[3,"click","ngClass"],["recording","",3,"item","routerLink",4,"ngFor","ngForOf"],["recording","",3,"item","routerLink"]];},template:function(t,n){t&1&&(o(0,"table",5)(1,"thead")(2,"tr")(3,"th",6),u("click",function(){return n.sort("fullName");}),M(4,0),r(),o(5,"th",6),u("click",function(){return n.sort("rating");}),M(6,1),r(),o(7,"th",6),u("click",function(){return n.sort("created");}),M(8,2),r(),o(9,"th")(10,"div"),M(11,3),r()(),o(12,"th")(13,"div"),M(14,4),r()()()(),o(15,"tbody"),C(16,Me,1,4,"tr",7),r()()),t&2&&(d(3),s("ngClass",k(4,B,n.sortName,n.ascending,!n.ascending)),d(2),s("ngClass",k(8,B,n.sortRating,n.ascending,!n.ascending)),d(2),s("ngClass",k(12,B,n.sortDate,n.ascending,!n.ascending)),d(9),s("ngForOf",n.items));},dependencies:[T,v,P,ne,Y],encapsulation:2});}}return i;})();var oe=(()=>{class i{constructor(e){this._recordings=e;}get filter(){return this._recordings.fullName;}set filter(e){this._recordings.fullName=e;}static{this.ɵfac=function(t){return new(t||i)(c(_));};}static{this.ɵcmp=g({type:i,selectors:[["app-text-filter"]],decls:1,vars:1,consts:()=>{let e;return e="Suche...",[["hint",e,3,"textChange","text"]];},template:function(t,n){t&1&&(o(0,"semantic-search",0),R("textChange",function(l){return E(n.filter,l)||(n.filter=l),l;}),r()),t&2&&S("text",n.filter);},dependencies:[ee],encapsulation:2});}}return i;})();function w(i,a){return i.pipe(U(e=>Object.keys(e).map(t=>({key:t,text:e[t][a]||t})).sort((t,n)=>t.text.toLocaleLowerCase().localeCompare(n.text.toLocaleLowerCase()))));}var se=(()=>{class i{constructor(e,t){this._languages=e,this._recordings=t,this.orderedAsItems=[],this._subscription=w(this._languages.map,"name").subscribe(n=>this.orderedAsItems=n);}ngOnDestroy(){this._subscription.unsubscribe();}get selected(){return this._recordings.language;}set selected(e){this._recordings.language=e;}static{this.ɵfac=function(t){return new(t||i)(c(z),c(_));};}static{this.ɵcmp=g({type:i,selectors:[["app-language-filter"]],decls:1,vars:2,consts:()=>{let e;return e="(alle Sprachen)",[["hint",e,3,"selectedChange","items","selected"]];},template:function(t,n){t&1&&(o(0,"semantic-single-select",0),R("selectedChange",function(l){return E(n.selected,l)||(n.selected=l),l;}),r()),t&2&&(s("items",n.orderedAsItems),S("selected",n.selected));},dependencies:[I],encapsulation:2});}}return i;})();var ce=(()=>{class i{constructor(e,t){this._genres=e,this._recordings=t,this.orderedAsItems=[],this._subscription=w(this._genres.map,"name").subscribe(n=>this.orderedAsItems=n);}ngOnDestroy(){this._subscription.unsubscribe();}get selected(){return this._recordings.genres||[];}set selected(e){this._recordings.genres=e;}static{this.ɵfac=function(t){return new(t||i)(c(X),c(_));};}static{this.ɵcmp=g({type:i,selectors:[["app-genre-filter"]],decls:1,vars:2,consts:()=>{let e;return e="(alle Kategorien)",[["hint",e,3,"selectedChange","items","selected"]];},template:function(t,n){t&1&&(o(0,"semantic-multi-select",0),R("selectedChange",function(l){return E(n.selected,l)||(n.selected=l),l;}),r()),t&2&&(s("items",n.orderedAsItems),S("selected",n.selected));},dependencies:[Z],encapsulation:2});}}return i;})();var ae=(()=>{class i{constructor(e,t){this._series=e,this._recordings=t,this.orderedAsItems=[],this._subscription=w(this._series.map,"fullName").subscribe(n=>this.orderedAsItems=n);}ngOnDestroy(){this._subscription.unsubscribe();}get selected(){return this._recordings.series;}set selected(e){this._recordings.series=e;}static{this.ɵfac=function(t){return new(t||i)(c(ie),c(_));};}static{this.ɵcmp=g({type:i,selectors:[["app-series-filter"]],decls:1,vars:2,consts:()=>{let e;return e="(alle Serien)",[["hint",e,3,"selectedChange","items","selected"]];},template:function(t,n){t&1&&(o(0,"semantic-single-select",0),R("selectedChange",function(l){return E(n.selected,l)||(n.selected=l),l;}),r()),t&2&&(s("items",n.orderedAsItems),S("selected",n.selected));},dependencies:[I],encapsulation:2});}}return i;})();var le=(()=>{class i{constructor(e){this._recordings=e,this.orderedAsItems=[{key:"1",text:"verliehen"},{key:"0",text:"nicht verliehen"}];}get selected(){return typeof this._recordings.rent=="boolean"?this._recordings.rent?"1":"0":"";}set selected(e){this._recordings.rent=e===""?void 0:e==="1";}static{this.ɵfac=function(t){return new(t||i)(c(_));};}static{this.ɵcmp=g({type:i,selectors:[["app-rent-filter"]],decls:1,vars:2,consts:()=>{let e;return e="(verliehen egal)",[["hint",e,3,"selectedChange","items","selected"]];},template:function(t,n){t&1&&(o(0,"semantic-single-select",0),R("selectedChange",function(l){return E(n.selected,l)||(n.selected=l),l;}),r()),t&2&&(s("items",n.orderedAsItems),S("selected",n.selected));},dependencies:[I],encapsulation:2});}}return i;})();function Oe(i,a){if(i&1){let e=D();o(0,"a",2),u("click",function(){let n=b(e).$implicit;return G(n.onClick());}),p(1),r();}if(i&2){let e=a.$implicit;s("ngClass",e.className),d(),O(e.count);}}var ve=[15,30,50,75,100,250],de=(()=>{class i{constructor(e){this._recordingService=e;}get size(){return this._recordingService.pageSize;}get items(){return ve.map(e=>({className:{active:e===this.size,item:!0},count:e,onClick:()=>this._recordingService.pageSize=e}));}static{this.ɵfac=function(t){return new(t||i)(c(_));};}static{this.ɵcmp=g({type:i,selectors:[["app-page-size-filter"]],decls:2,vars:1,consts:[[1,"ui","menu"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"click","ngClass"]],template:function(t,n){t&1&&(o(0,"div",0),C(1,Oe,2,2,"a",1),r()),t&2&&(d(),s("ngForOf",n.items));},dependencies:[T,v,P],encapsulation:2});}}return i;})();var Pe=(i,a)=>({active:i,disabled:a});function Ne(i,a){if(i&1){let e=D();o(0,"a",3),u("click",function(){let n=b(e).$implicit,m=y();return G(n.page&&m.setPage(n.page));}),p(1),r();}if(i&2){let e=a.$implicit,t=y();s("ngClass",x(2,Pe,e.page===t.curPage,!e.page)),d(),O(e.page||"...");}}function ye(i,a){let e=[];if(i<1)return e;if(e.push({page:1}),i<8){for(let t=2;t<=i;t++)e.push({page:t});return e;}if(a<=5){for(let t=2;t<=5;t++)e.push({page:t});return e.push({page:void 0}),e.push({page:i}),e;}if(e.push({page:void 0}),a>=i-4){for(let t=i-4;t<=i;t++)e.push({page:t});return e;}for(let t=a-1;t<=a+1;t++)e.push({page:t});return e.push({page:void 0}),e.push({page:i}),e;}var ge=(()=>{class i{constructor(e){this._recordingService=e,this._result={correlationId:"",count:0,genres:[],languages:[],total:0,view:[]},this.maxPage=0,this.pages=[];}get curPage(){return this._recordingService.page+1;}setPage(e){e<1||e>this.maxPage||(this._recordingService.page=e-1);}ngOnInit(){this._recordings=this._recordingService.result.subscribe(e=>{this.maxPage=e.count>0?Math.ceil(e.count/this._recordingService.pageSize):0,this.pages=ye(this.maxPage,this.curPage),this._result=e;});}ngOnDestroy(){this._recordings?.unsubscribe();}static{this.ɵfac=function(t){return new(t||i)(c(_));};}static{this.ɵcmp=g({type:i,selectors:[["app-pagination"]],decls:10,vars:1,consts:[[1,"ui","pagination","menu"],[1,"item",3,"click"],["class","item",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"item",3,"click","ngClass"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"a",1),u("click",function(){return n.setPage(1);}),p(2,"\xAB"),r(),o(3,"a",1),u("click",function(){return n.setPage(n.curPage-1);}),p(4,"\u27E8"),r(),C(5,Ne,2,5,"a",2),o(6,"a",1),u("click",function(){return n.setPage(n.curPage+1);}),p(7,"\u27E9"),r(),o(8,"a",1),u("click",function(){return n.setPage(n.maxPage);}),p(9,"\xBB"),r()()),t&2&&(d(5),s("ngForOf",n.pages));},dependencies:[T,v,P],encapsulation:2});}}return i;})();var me=(()=>{class i{constructor(e){this._service=e,this._result={correlationId:"",count:0,genres:[],languages:[],total:0,view:[]},this.of=" von ";}get total(){return this._result.total;}get count(){return this._result.count;}onExport(){this._service.openExport();}ngOnInit(){this._query=this._service.result.subscribe(e=>this._result=e);}ngOnDestroy(){this._query?.unsubscribe();}clear(){this._service.reset();}static{this.ɵfac=function(t){return new(t||i)(c(_));};}static{this.ɵcmp=g({type:i,selectors:[["app-recordings"]],decls:19,vars:3,consts:()=>{let e;e="Exportieren";let t;return t="Neue Suche",[e,t,[1,"page"],[1,"headline"],[1,"ui","compact","segment","counts"],[1,"ui","button",3,"click"],[1,"ui","segment","filter"],[1,"search"],[1,"sizer"],[1,"results"]];},template:function(t,n){t&1&&(o(0,"div",2)(1,"div",3)(2,"div",4),p(3),r(),o(4,"button",5),u("click",function(){return n.onExport();}),M(5,0),r()(),o(6,"div",6)(7,"div",7),h(8,"app-text-filter"),o(9,"div",5),u("click",function(){return n.clear();}),M(10,1),r()(),h(11,"app-language-filter")(12,"app-genre-filter")(13,"app-series-filter")(14,"app-rent-filter"),r(),o(15,"div",8),h(16,"app-page-size-filter")(17,"app-pagination"),r(),h(18,"app-recording-table",9),r()),t&2&&(d(3),V("",n.count,"",n.of,"",n.total,""));},dependencies:[ce,se,de,ge,re,le,ae,oe],styles:["[_nghost-%COMP%]{width:100%;height:100%;overflow:hidden}.page[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto auto auto 1fr;row-gap:.5em;width:100%;height:100%;padding:0 1em 1em;overflow:hidden}.page[_ngcontent-%COMP%] > .ui.segment[_ngcontent-%COMP%]{margin:0}.page[_ngcontent-%COMP%] > .headline[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto;align-items:center;justify-content:space-between}.page[_ngcontent-%COMP%] > .headline[_ngcontent-%COMP%] > .ui.segment[_ngcontent-%COMP%]{margin:0}.page[_ngcontent-%COMP%] > .filter[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto;grid-auto-flow:row;row-gap:.5em}.page[_ngcontent-%COMP%] > .filter[_ngcontent-%COMP%] > .search[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;column-gap:.5em;align-items:center}.page[_ngcontent-%COMP%] > .sizer[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto;column-gap:.5em;align-items:center;justify-content:flex-start}.page[_ngcontent-%COMP%] > .results[_ngcontent-%COMP%]{width:100%;height:100%;overflow:auto}"]});}}return i;})();var Ie=[{component:me,path:""}],_e=(()=>{class i{static{this.ɵfac=function(t){return new(t||i)();};}static{this.ɵmod=$({type:i});}static{this.ɵinj=L({imports:[A.forChild(Ie),A]});}}return i;})();var ht=(()=>{class i{static{this.ɵfac=function(t){return new(t||i)();};}static{this.ɵmod=$({type:i});}static{this.ɵinj=L({imports:[T,A,te,_e]});}}return i;})();export{ht as RecordingsModule};/**i18n:4f0ea12499191b9fb7bfd15ae35102ab286a3db89d761e221a76f1a80285e269*/