import{a as F}from"./chunk-3UAKMNZR.js";import{a as Y,b as ee,c as ie}from"./chunk-3JMWS3XA.js";import{a as ne}from"./chunk-QRSEQL3H.js";import{A as S,B as T,C as c,I as U,J as G,M,N as v,O,P as _,U as w,V as X,W,Z as j,ca as z,da as B,ea as q,fa as H,g as P,ha as J,j as m,k as f,ka as K,la as y,ma as Q,n as s,na as Z,o as E,p as u,pa as te,q as N,r as V,s as R,t as a,u as D,w as d,x as l,y as g,z as x}from"./chunk-CJ2PPRXS.js";var re=r=>({disabled:r}),_e=r=>({errors:r}),L=r=>({error:r});function pe(r,n){if(r&1){let o=x();d(0,"div",21),T("click",function(){m(o);let t=c(2);return f(t.onRemove());}),S(1,6),l();}}function me(r,n){if(r&1){let o=x();d(0,"div")(1,"div",8)(2,"div",9),T("click",function(){m(o);let t=c();return f(t.reload());}),S(3,0),l(),d(4,"div",10),T("click",function(){m(o);let t=c();return f(t.onSave());}),S(5,1),l(),R(6,pe,2,0,"div",11),l(),d(7,"div",12)(8,"div",13)(9,"label"),S(10,2),l(),d(11,"semantic-single-select",14),O("selectedChange",function(t){m(o);let i=c();return v(i.parentId,t)||(i.parentId=t),f(t);}),l()(),g(12,"app-validation-errors",15),d(13,"div",16)(14,"label"),S(15,3),l(),d(16,"div",17)(17,"input",18),O("ngModelChange",function(t){m(o);let i=c();return v(i.name,t)||(i.name=t),f(t);}),l()()(),g(18,"app-validation-errors",15),d(19,"div",13)(20,"label"),S(21,4),l(),d(22,"div",17)(23,"textarea",19),O("ngModelChange",function(t){m(o);let i=c();return v(i.description,t)||(i.description=t),f(t);}),l()()(),g(24,"app-validation-errors",15),l(),d(25,"app-semantic-modal",20),T("closed",function(){m(o);let t=c();return f(t.confirm=!1);})("confirm",function(){m(o);let t=c();return f(t.onConfirm());}),S(26,5),l()();}if(r&2){let o=c();s(2),a("ngClass",_(15,re,!o.edit.isDirty)),s(2),a("ngClass",_(17,re,!o.edit.isDirty||o.edit.validationErrors)),s(2),a("ngIf",o.editId),s(),a("ngClass",_(19,_e,o.edit.validationErrors)),s(),a("ngClass",_(21,L,o.edit.validationErrors==null?null:o.edit.validationErrors.parentId)),s(3),a("items",o.parentAsItems),M("selected",o.parentId),s(),a("list",o.edit.validationErrors==null?null:o.edit.validationErrors.parentId),s(),a("ngClass",_(23,L,o.edit.validationErrors==null?null:o.edit.validationErrors.name)),s(4),M("ngModel",o.name),s(),a("list",o.edit.validationErrors==null?null:o.edit.validationErrors.name),s(),a("ngClass",_(25,L,o.edit.validationErrors==null?null:o.edit.validationErrors.description)),s(4),M("ngModel",o.description),s(),a("list",o.edit.validationErrors==null?null:o.edit.validationErrors.description),s(),a("show",o.confirm);}}var oe=(()=>{let n=class n extends ne{getEditService(){return this._service;}constructor(e){super(),this._service=e,this._map={},this.parentAsItems=[];}reload(){super.reload();let e=new Set(),t=i=>{e.add(i._id);for(let p of i.children||[])t(p);};if(this.editId&&this.editId!=="@"){let i=this._map[this.editId];i&&t(i);}this.parentAsItems=Object.keys(this._map).filter(i=>!e.has(i)).map(i=>this._map[i]).sort((i,p)=>i.fullName.toLocaleLowerCase().localeCompare(p.fullName.toLocaleLowerCase())).map(i=>({key:i._id,text:i.fullName}));}ngOnInit(){super.ngOnInit(),this._all=this._service.map.subscribe(e=>{this._map=e,this.reload();});}ngOnDestroy(){var e;super.ngOnDestroy(),(e=this._all)==null||e.unsubscribe();}onSave(){this.edit&&this._service.addOrUpdate(this.editId,this.edit);}onConfirm(){this._service.remove(this.editId),this.confirm=!1;}get name(){var e;return((e=this.edit)==null?void 0:e.name)||"";}set name(e){this.edit&&(this.edit.name=e);}get description(){var e;return((e=this.edit)==null?void 0:e.description)||"";}set description(e){this.edit&&(this.edit.description=e);}get parentId(){var e;return((e=this.edit)==null?void 0:e.parentId)||"";}set parentId(e){this.edit&&(this.edit.parentId=e||void 0);}};n.ɵfac=function(t){return new(t||n)(E(F));},n.ɵcmp=u({type:n,selectors:[["app-series-form"]],standalone:!1,features:[V],decls:1,vars:1,consts:()=>{let e;e="(keine)";let t;t=" Verwerfen ";let i;i=" Speichern ";let p;p="\xDCbergeordnete Serie";let h;h="Name";let $;$="Beschreibung";let b;b=" Das L\xF6schen einer Serie kann nicht r\xFCckg\xE4ngig gemacht werden. Soll die Serie wirklich endg\xFCltig entfernt werden? ";let k;return k=" L\xF6schen ",[t,i,p,h,$,b,k,[4,"ngIf"],[1,"actions"],[1,"ui","button",3,"click","ngClass"],[1,"ui","primary","button",3,"click","ngClass"],["class","ui negative button",3,"click",4,"ngIf"],[1,"ui","form",3,"ngClass"],[1,"field",3,"ngClass"],["hint",e,3,"selectedChange","items","selected"],[3,"list"],[1,"required","field",3,"ngClass"],[1,"ui","input"],["type","text",3,"ngModelChange","ngModel"],["rows","5",3,"ngModelChange","ngModel"],[3,"closed","confirm","show"],[1,"ui","negative","button",3,"click"]];},template:function(t,i){t&1&&R(0,me,27,27,"div",7),t&2&&a("ngIf",i.edit);},dependencies:[w,W,Q,z,B,q,Z,te],styles:["[_nghost-%COMP%]{width:100%;height:100%;padding-right:.5em;overflow:auto}"]});let r=n;return r;})();var ge=r=>["/series",r],se=(()=>{let n=class n{constructor(){this.series=void 0;}};n.ɵfac=function(t){return new(t||n)();},n.ɵcmp=u({type:n,selectors:[["app-series-item"]],inputs:{series:"series"},standalone:!1,decls:2,vars:4,consts:[[1,"item",3,"routerLink"]],template:function(t,i){t&1&&(d(0,"div",0),U(1),l()),t&2&&(a("routerLink",_(2,ge,i.series._id)),s(),G(i.series.name));},dependencies:[K],styles:["[_nghost-%COMP%]{overflow:hidden}.item[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"]});let r=n;return r;})();var Ce=r=>({active:r});function he(r,n){if(r&1&&g(0,"app-series-item",4),r&2){let o=n.$implicit,e=c();D("margin-left: "+o.level+"em"),a("ngClass",_(4,Ce,o._id===e.selected))("series",o);}}var ae=(()=>{let n=class n{constructor(e){this._service=e,this.selected="",this.items=[],this.all=[],this._map={},this._filter="";}ngOnInit(){this._query=this._service.map.subscribe(e=>{this._map=e,this.all=Object.keys(e).map(t=>e[t]).sort((t,i)=>t.fullName.toLocaleLowerCase().localeCompare(i.fullName.toLocaleLowerCase())),this.refreshFilter();});}get filter(){return this._filter;}set filter(e){this._filter=e,this.refreshFilter();}refreshFilter(){let e=(this._filter||"").toLocaleLowerCase(),t=new Set(this.all.filter(i=>!e||i.fullName.toLocaleLowerCase().indexOf(e)>=0).map(i=>i._id));for(let i of Array.from(t))for(;;){let p=this._map[i];if(!p)break;t.add(i),i=p.parentId||"";}this.items=this.all.filter(i=>t.has(i._id));}ngOnDestroy(){var e;(e=this._query)==null||e.unsubscribe();}};n.ɵfac=function(t){return new(t||n)(E(F));},n.ɵcmp=u({type:n,selectors:[["app-series-list"]],inputs:{selected:"selected"},standalone:!1,decls:4,vars:3,consts:()=>{let e;return e="Suche...",[[1,"complete"],["hint",e,3,"textChange","text","clearable"],[1,"ui","selection","list"],["class","item",3,"ngClass","series","style",4,"ngFor","ngForOf"],[1,"item",3,"ngClass","series"]];},template:function(t,i){t&1&&(d(0,"div",0)(1,"semantic-search",1),O("textChange",function(h){return v(i.filter,h)||(i.filter=h),h;}),l(),d(2,"div",2),R(3,he,1,6,"app-series-item",3),l()()),t&2&&(s(),M("text",i.filter),a("clearable",!0),s(2),a("ngForOf",i.items));},dependencies:[w,X,ee,se],styles:["[_nghost-%COMP%]{width:100%;height:100%;overflow:auto}.complete[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto 1fr;height:100%;overflow:hidden}.complete[_ngcontent-%COMP%] > .ui.list[_ngcontent-%COMP%]{row-gap:10em;padding:.5em;overflow:auto;background:#fff}.complete[_ngcontent-%COMP%] > .ui.list[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%] + .item[_ngcontent-%COMP%]{margin-top:.5em}.complete[_ngcontent-%COMP%] > .ui.list[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]:not(.active):not(:hover){color:#666;background:#ddd}"]});let r=n;return r;})();var A=(()=>{let n=class n{constructor(e){this._route=e,this.selected="";}ngOnInit(){this._query=this._route.params.subscribe(e=>this.selected=e.id);}ngOnDestroy(){var e;(e=this._query)==null||e.unsubscribe();}};n.ɵfac=function(t){return new(t||n)(E(J));},n.ɵcmp=u({type:n,selectors:[["app-series"]],standalone:!1,decls:3,vars:2,consts:[[1,"page"],["list","",3,"selected"],["detail","",3,"selected"]],template:function(t,i){t&1&&(d(0,"app-master-detail",0),g(1,"app-series-list",1)(2,"app-series-form",2),l()),t&2&&(s(),a("selected",i.selected),s(),a("selected",i.selected));},dependencies:[Y,oe,ae],styles:["[_nghost-%COMP%]{width:100%;height:100%;overflow:hidden}.page[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}"]});let r=n;return r;})();var Me=[{component:A,path:"",pathMatch:"full"},{component:A,path:":id"}],le=(()=>{let n=class n{};n.ɵfac=function(t){return new(t||n)();},n.ɵmod=N({type:n}),n.ɵinj=P({imports:[y.forChild(Me),y]});let r=n;return r;})();var Be=(()=>{let n=class n{};n.ɵfac=function(t){return new(t||n)();},n.ɵmod=N({type:n}),n.ɵinj=P({imports:[j,ie,y,H,le]});let r=n;return r;})();export{Be as SeriesModule};/**i18n:08c1d4d8c08a2162d727ca9e0c346dc3cd29b4127d277ac11485a3d27068df66*/