import{a as P}from"./chunk-PW446RMW.js";import{a as J}from"./chunk-ESIWXUQQ.js";import{a as K}from"./chunk-U3V7C2VE.js";import{a as ee}from"./chunk-URRIJCPQ.js";import{a as Q,b as Y,c as Z}from"./chunk-JMPZZGS5.js";import{a as B,b as j,c as q,d as H}from"./chunk-OCSQWRX7.js";import{Ca as z,E as w,F as I,I as V,J as D,K as a,L as d,M as l,N as g,O as N,P as C,Q as R,R as _,Y as U,Z as G,_ as X,ba as M,ca as v,da as O,fa as c,m,n as u,qa as T,t as s,ua as y,v as E,w as f,z as k,za as W}from"./chunk-H3AGR35F.js";var oe=r=>["/series",r],te=(()=>{let o=class o{constructor(){this.series=void 0;}};o.ɵfac=function(t){return new(t||o)();},o.ɵcmp=f({type:o,selectors:[["app-series-item"]],inputs:{series:"series"},decls:2,vars:4,consts:[[1,"item",3,"routerLink"]],template:function(t,i){t&1&&(d(0,"div",0),G(1),l()),t&2&&(a("routerLink",c(2,oe,i.series._id)),s(),X(i.series.name));},dependencies:[z],styles:["[_nghost-%COMP%]{overflow:hidden}.item[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"]});let r=o;return r;})();var le=r=>({active:r}),de=(r,o)=>o._id;function _e(r,o){if(r&1&&g(0,"app-series-item",4),r&2){let n=o.$implicit,e=_();U("margin-left: "+n.level+"em"),a("ngClass",c(4,le,n._id===e.selected))("series",n);}}var ie=(()=>{let o=class o{constructor(e){this._service=e,this.selected="",this.items=[],this.all=[],this._map={},this._filter="";}ngOnInit(){this._query=this._service.map.subscribe(e=>{this._map=e,this.all=Object.keys(e).map(t=>e[t]).sort((t,i)=>t.fullName.toLocaleLowerCase().localeCompare(i.fullName.toLocaleLowerCase())),this.refreshFilter();});}get filter(){return this._filter;}set filter(e){this._filter=e,this.refreshFilter();}refreshFilter(){let e=(this._filter||"").toLocaleLowerCase(),t=new Set(this.all.filter(i=>!e||i.fullName.toLocaleLowerCase().indexOf(e)>=0).map(i=>i._id));for(let i of Array.from(t))for(;;){let p=this._map[i];if(!p)break;t.add(i),i=p.parentId||"";}this.items=this.all.filter(i=>t.has(i._id));}ngOnDestroy(){var e;(e=this._query)==null||e.unsubscribe();}};o.ɵfac=function(t){return new(t||o)(E(P));},o.ɵcmp=f({type:o,selectors:[["app-series-list"]],inputs:{selected:"selected"},decls:5,vars:2,consts:()=>{let e;return e="Suche...",[[1,"complete"],["hint",e,3,"textChange","text","clearable"],[1,"ui","selection","list"],[1,"item",3,"ngClass","series","style"],[1,"item",3,"ngClass","series"]];},template:function(t,i){t&1&&(d(0,"div",0)(1,"semantic-search",1),O("textChange",function(h){return v(i.filter,h)||(i.filter=h),h;}),l(),d(2,"div",2),V(3,_e,1,6,"app-series-item",3,de),l()()),t&2&&(s(),M("text",i.filter),a("clearable",!0),s(2),D(i.items));},dependencies:[J,y,T,te],styles:["[_nghost-%COMP%]{width:100%;height:100%;overflow:auto}.complete[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto 1fr;height:100%;overflow:hidden}.complete[_ngcontent-%COMP%] > .ui.list[_ngcontent-%COMP%]{row-gap:10em;padding:.5em;overflow:auto;background:#fff}.complete[_ngcontent-%COMP%] > .ui.list[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%] + .item[_ngcontent-%COMP%]{margin-top:.5em}.complete[_ngcontent-%COMP%] > .ui.list[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]:not(.active):not(:hover){color:#666;background:#ddd}"]});let r=o;return r;})();var ne=r=>({disabled:r}),ce=r=>({errors:r}),x=r=>({error:r});function pe(r,o){if(r&1){let n=N();d(0,"div",20),R("click",function(){m(n);let t=_(2);return u(t.onRemove());}),C(1,6),l();}}function me(r,o){if(r&1){let n=N();d(0,"div")(1,"div",7)(2,"div",8),R("click",function(){m(n);let t=_();return u(t.reload());}),C(3,0),l(),d(4,"div",9),R("click",function(){m(n);let t=_();return u(t.onSave());}),C(5,1),l(),w(6,pe,2,0,"div",10),l(),d(7,"div",11)(8,"div",12)(9,"label"),C(10,2),l(),d(11,"semantic-single-select",13),O("selectedChange",function(t){m(n);let i=_();return v(i.parentId,t)||(i.parentId=t),u(t);}),l()(),g(12,"app-validation-errors",14),d(13,"div",15)(14,"label"),C(15,3),l(),d(16,"div",16)(17,"input",17),O("ngModelChange",function(t){m(n);let i=_();return v(i.name,t)||(i.name=t),u(t);}),l()()(),g(18,"app-validation-errors",14),d(19,"div",12)(20,"label"),C(21,4),l(),d(22,"div",16)(23,"textarea",18),O("ngModelChange",function(t){m(n);let i=_();return v(i.description,t)||(i.description=t),u(t);}),l()()(),g(24,"app-validation-errors",14),l(),d(25,"app-semantic-modal",19),R("closed",function(){m(n);let t=_();return u(t.confirm=!1);})("confirm",function(){m(n);let t=_();return u(t.onConfirm());}),C(26,5),l()();}if(r&2){let n=_();s(2),a("ngClass",c(15,ne,!n.edit.isDirty)),s(2),a("ngClass",c(17,ne,!n.edit.isDirty||n.edit.validationErrors)),s(2),I(n.editId?6:-1),s(),a("ngClass",c(19,ce,n.edit.validationErrors)),s(),a("ngClass",c(21,x,n.edit.validationErrors==null?null:n.edit.validationErrors.parentId)),s(3),a("items",n.parentAsItems),M("selected",n.parentId),s(),a("list",n.edit.validationErrors==null?null:n.edit.validationErrors.parentId),s(),a("ngClass",c(23,x,n.edit.validationErrors==null?null:n.edit.validationErrors.name)),s(4),M("ngModel",n.name),s(),a("list",n.edit.validationErrors==null?null:n.edit.validationErrors.name),s(),a("ngClass",c(25,x,n.edit.validationErrors==null?null:n.edit.validationErrors.description)),s(4),M("ngModel",n.description),s(),a("list",n.edit.validationErrors==null?null:n.edit.validationErrors.description),s(),a("show",n.confirm);}}var re=(()=>{let o=class o extends Q{getEditService(){return this._service;}constructor(e){super(),this._service=e,this._map={},this.parentAsItems=[];}reload(){super.reload();let e=new Set(),t=i=>{e.add(i._id);for(let p of i.children||[])t(p);};if(this.editId&&this.editId!=="@"){let i=this._map[this.editId];i&&t(i);}this.parentAsItems=Object.keys(this._map).filter(i=>!e.has(i)).map(i=>this._map[i]).sort((i,p)=>i.fullName.toLocaleLowerCase().localeCompare(p.fullName.toLocaleLowerCase())).map(i=>({key:i._id,text:i.fullName}));}ngOnInit(){super.ngOnInit(),this._all=this._service.map.subscribe(e=>{this._map=e,this.reload();});}ngOnDestroy(){var e;super.ngOnDestroy(),(e=this._all)==null||e.unsubscribe();}onSave(){this.edit&&this._service.addOrUpdate(this.editId,this.edit);}onConfirm(){this._service.remove(this.editId),this.confirm=!1;}get name(){var e;return((e=this.edit)==null?void 0:e.name)||"";}set name(e){this.edit&&(this.edit.name=e);}get description(){var e;return((e=this.edit)==null?void 0:e.description)||"";}set description(e){this.edit&&(this.edit.description=e);}get parentId(){var e;return((e=this.edit)==null?void 0:e.parentId)||"";}set parentId(e){this.edit&&(this.edit.parentId=e||void 0);}};o.ɵfac=function(t){return new(t||o)(E(P));},o.ɵcmp=f({type:o,selectors:[["app-series-form"]],features:[k],decls:1,vars:1,consts:()=>{let e;e="(keine)";let t;t=" Verwerfen ";let i;i=" Speichern ";let p;p="\xDCbergeordnete Serie";let h;h="Name";let A;A="Beschreibung";let $;$=" Das L\xF6schen einer Serie kann nicht r\xFCckg\xE4ngig gemacht werden. Soll die Serie wirklich endg\xFCltig entfernt werden? ";let b;return b=" L\xF6schen ",[t,i,p,h,A,$,b,[1,"actions"],[1,"ui","button",3,"click","ngClass"],[1,"ui","primary","button",3,"click","ngClass"],[1,"ui","negative","button"],[1,"ui","form",3,"ngClass"],[1,"field",3,"ngClass"],["hint",e,3,"selectedChange","items","selected"],[3,"list"],[1,"required","field",3,"ngClass"],[1,"ui","input"],["type","text",3,"ngModelChange","ngModel"],["rows","5",3,"ngModelChange","ngModel"],[3,"closed","confirm","show"],[1,"ui","negative","button",3,"click"]];},template:function(t,i){t&1&&w(0,me,27,27,"div"),t&2&&I(i.edit?0:-1);},dependencies:[y,T,Y,H,B,j,q,Z,K],styles:["[_nghost-%COMP%]{width:100%;height:100%;padding-right:.5em;overflow:auto}"]});let r=o;return r;})();var L=(()=>{let o=class o{constructor(e){this._route=e,this.selected="";}ngOnInit(){this._query=this._route.params.subscribe(e=>this.selected=e.id);}ngOnDestroy(){var e;(e=this._query)==null||e.unsubscribe();}};o.ɵfac=function(t){return new(t||o)(E(W));},o.ɵcmp=f({type:o,selectors:[["app-series"]],decls:3,vars:2,consts:[[1,"page"],["list","",3,"selected"],["detail","",3,"selected"]],template:function(t,i){t&1&&(d(0,"app-master-detail",0),g(1,"app-series-list",1)(2,"app-series-form",2),l()),t&2&&(s(),a("selected",i.selected),s(),a("selected",i.selected));},dependencies:[ee,ie,re],styles:["[_nghost-%COMP%]{width:100%;height:100%;overflow:hidden}.page[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}"]});let r=o;return r;})();var Ae=[{component:L,path:"",pathMatch:"full"},{component:L,path:":id"}];export{Ae as seriesRoutes};/**i18n:a81502aaa6c235164e05e21a700811bd0f875766fa20fd8a698be98cd7fa9431*/