"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[933],{7933:(H,g,c)=>{c.r(g),c.d(g,{ContainerModule:()=>j});var d=c(6895),m=c(433),p=c(8902),e=c(8256),x=c(6279),l=c(4061),y=c(4387),_=c(8197),Z=c(7886),T=c(7005),J=c(2722);const M={[l.j.Box]:"briefcase",[l.j.Disk]:"hdd",[l.j.FeatureSet]:"zip",[l.j.Folder]:"folder",[l.j.Shelf]:"building",[l.j.Undefined]:"help"};let h=(()=>{class n{constructor(){this.type=l.j.Undefined}get iconType(){return M[this.type]||"help"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-container-icon"]],inputs:{type:"type"},decls:1,vars:1,consts:[[1,"ui","icon",3,"ngClass"]],template:function(t,i){1&t&&e._UZ(0,"i",0),2&t&&e.Q6J("ngClass",i.iconType)},dependencies:[d.mk]}),n})();const w=["selector"];let b=(()=>{class n{constructor(){this.selected=l.j.Undefined,this.selectedChange=new e.vpe}setSelected(t){$(this.selector?.nativeElement)?.dropdown("set exactly",t?`${t}`:[])}ngAfterViewInit(){const t=$(this.selector?.nativeElement);t.dropdown({forceSelection:!1,onChange:i=>this.selectedChange.emit(parseInt(i,10))}),setTimeout(()=>{this.setSelected(this.selected),t.css("visibility","")},100)}ngOnChanges(t){const i=t.selected;i&&this.setSelected(i.currentValue)}ngOnDestroy(){$(this.selector?.nativeElement)?.dropdown("destroy")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-component-type"]],viewQuery:function(t,i){if(1&t&&e.Gf(w,5),2&t){let o;e.iGM(o=e.CRH())&&(i.selector=o.first)}},inputs:{selected:"selected"},outputs:{selectedChange:"selectedChange"},features:[e.TTD],decls:23,vars:6,consts:[[1,"ui","selection","dropdown",2,"visibility","hidden"],["selector",""],[1,"dropdown","icon"],[1,"default","text"],[1,"menu"],["data-value","0",1,"item"],[3,"type"],["data-value","1",1,"item"],["data-value","2",1,"item"],["data-value","3",1,"item"],["data-value","5",1,"item"],["data-value","4",1,"item"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0,1),e._UZ(2,"i",2)(3,"div",3),e.TgZ(4,"div",4)(5,"div",5),e._UZ(6,"app-container-icon",6),e._uU(7,"(unbekannt)"),e.qZA(),e.TgZ(8,"div",7),e._UZ(9,"app-container-icon",6),e._uU(10,"Kleine DVD Box"),e.qZA(),e.TgZ(11,"div",8),e._UZ(12,"app-container-icon",6),e._uU(13,"Gro\xdfe DVD Box"),e.qZA(),e.TgZ(14,"div",9),e._UZ(15,"app-container-icon",6),e._uU(16,"Regal(fach)"),e.qZA(),e.TgZ(17,"div",10),e._UZ(18,"app-container-icon",6),e._uU(19,"Dateiverzeichnis"),e.qZA(),e.TgZ(20,"div",11),e._UZ(21,"app-container-icon",6),e._uU(22,"(Externe) Festplatte"),e.qZA()()()),2&t&&(e.xp6(6),e.Q6J("type",0),e.xp6(3),e.Q6J("type",1),e.xp6(3),e.Q6J("type",2),e.xp6(3),e.Q6J("type",3),e.xp6(3),e.Q6J("type",5),e.xp6(3),e.Q6J("type",4))},dependencies:[h],styles:[".ui.selection.dropdown[_ngcontent-%COMP%] > .text[_ngcontent-%COMP%]{width:12em}"]}),n})();function A(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",16),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onRemove())}),e._uU(1,"L\xf6schen"),e.qZA()}}const F=function(n){return["/recordings",n]};function O(n,s){if(1&n&&(e.TgZ(0,"tr",19)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",20),e._uU(4),e.qZA()()),2&n){const t=s.$implicit;e.Q6J("routerLink",e.VKq(3,F,t._id)),e.xp6(2),e.Oqu(t.fullName),e.xp6(2),e.Oqu(t.containerPosition)}}function U(n,s){if(1&n&&(e.TgZ(0,"table",17)(1,"thead")(2,"tr")(3,"th"),e._uU(4,"Aufzeichnung"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Position"),e.qZA()()(),e.TgZ(7,"tbody"),e.YNc(8,O,5,5,"tr",18),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(8),e.Q6J("ngForOf",t.contents)}}const C=function(n){return{disabled:n}},I=function(n){return{errors:n}},u=function(n){return{error:n}};function Q(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",1)(2,"div",2),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.reload())}),e._uU(3,"Verwerfen"),e.qZA(),e.TgZ(4,"div",3),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onSave())}),e._uU(5," Speichern "),e.qZA(),e.YNc(6,A,2,0,"div",4),e.qZA(),e.TgZ(7,"div",5)(8,"div",6)(9,"label"),e._uU(10,"\xdcbergeordnete Ablage"),e.qZA(),e.TgZ(11,"semantic-single-select",7),e.NdJ("selectedChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.parentId=o)}),e.qZA()(),e._UZ(12,"app-validation-errors",8),e.TgZ(13,"div",9)(14,"label"),e._uU(15,"Name"),e.qZA(),e.TgZ(16,"div",10)(17,"input",11),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.name=o)}),e.qZA()()(),e._UZ(18,"app-validation-errors",8),e.TgZ(19,"div",9)(20,"label"),e._uU(21,"Art der Ablage"),e.qZA(),e.TgZ(22,"app-component-type",12),e.NdJ("selectedChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.type=o)}),e.qZA()(),e._UZ(23,"app-validation-errors",8),e.TgZ(24,"div",6)(25,"label"),e._uU(26,"Beschreibung"),e.qZA(),e.TgZ(27,"div",10)(28,"textarea",13),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.description=o)}),e.qZA()()(),e._UZ(29,"app-validation-errors",8),e.TgZ(30,"div",6)(31,"label"),e._uU(32,"Position in der \xfcbergeordneten Ablage"),e.qZA(),e.TgZ(33,"div",10)(34,"input",11),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.parentLocation=o)}),e.qZA()()(),e._UZ(35,"app-validation-errors",8),e.qZA(),e.YNc(36,U,9,1,"table",14),e.TgZ(37,"app-semantic-modal",15),e.NdJ("closed",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.confirm=!1)})("confirm",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onConfirm())}),e._uU(38," Das L\xf6schen einer Ablage kann "),e.TgZ(39,"strong"),e._uU(40,"nicht"),e.qZA(),e._uU(41," r\xfcckg\xe4ngig gemacht werden. Soll die Ablage wirklich endg\xfcltig entfernt werden? "),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngClass",e.VKq(22,C,!t.edit.isDirty)),e.xp6(2),e.Q6J("ngClass",e.VKq(24,C,!t.edit.isDirty||t.edit.validationErrors)),e.xp6(2),e.Q6J("ngIf",t.editId),e.xp6(1),e.Q6J("ngClass",e.VKq(26,I,t.edit.validationErrors)),e.xp6(1),e.Q6J("ngClass",e.VKq(28,u,null==t.edit.validationErrors?null:t.edit.validationErrors.parentId)),e.xp6(3),e.Q6J("items",t.parentAsItems)("selected",t.parentId),e.xp6(1),e.Q6J("list",null==t.edit.validationErrors?null:t.edit.validationErrors.parentId),e.xp6(1),e.Q6J("ngClass",e.VKq(30,u,null==t.edit.validationErrors?null:t.edit.validationErrors.name)),e.xp6(4),e.Q6J("ngModel",t.name),e.xp6(1),e.Q6J("list",null==t.edit.validationErrors?null:t.edit.validationErrors.name),e.xp6(1),e.Q6J("ngClass",e.VKq(32,u,null==t.edit.validationErrors?null:t.edit.validationErrors.type)),e.xp6(3),e.Q6J("selected",t.type),e.xp6(1),e.Q6J("list",null==t.edit.validationErrors?null:t.edit.validationErrors.type),e.xp6(1),e.Q6J("ngClass",e.VKq(34,u,null==t.edit.validationErrors?null:t.edit.validationErrors.description)),e.xp6(4),e.Q6J("ngModel",t.description),e.xp6(1),e.Q6J("list",null==t.edit.validationErrors?null:t.edit.validationErrors.description),e.xp6(1),e.Q6J("ngClass",e.VKq(36,u,null==t.edit.validationErrors?null:t.edit.validationErrors.parentLocation)),e.xp6(4),e.Q6J("ngModel",t.parentLocation),e.xp6(1),e.Q6J("list",null==t.edit.validationErrors?null:t.edit.validationErrors.parentLocation),e.xp6(1),e.Q6J("ngIf",t.contents.length>0),e.xp6(1),e.Q6J("show",t.confirm)}}let q=(()=>{class n extends y.U{constructor(t){super(),this._service=t,this._map={},this.contents=[],this.parentAsItems=[]}getEditService(){return this._service}reload(){super.reload();const t=this._contents;t&&(this._contents=void 0,t.unsubscribe()),this.contents=[];const i=new Set,o=r=>{i.add(r._id);for(const a of r.children||[])o(a)};if(this.editId&&"@"!==this.editId){const r=this._map[this.editId];r&&o(r),this._contents=this._service.getContents(this.editId).subscribe(a=>this.contents=a)}this.parentAsItems=Object.keys(this._map).filter(r=>!i.has(r)).map(r=>this._map[r]).sort((r,a)=>r.fullName.toLocaleLowerCase().localeCompare(a.fullName.toLocaleLowerCase())).map(r=>({key:r._id,text:r.fullName}))}ngOnInit(){super.ngOnInit(),this._all=this._service.map.subscribe(t=>{this._map=t,this.reload()})}ngOnDestroy(){super.ngOnDestroy(),this._all?.unsubscribe(),this._contents?.unsubscribe()}onSave(){this.edit&&this._service.addOrUpdate(this.editId,this.edit)}onConfirm(){this._service.remove(this.editId),this.confirm=!1}get name(){return this.edit?.name||""}set name(t){this.edit&&(this.edit.name=t)}get description(){return this.edit?.description||""}set description(t){this.edit&&(this.edit.description=t)}get parentId(){return this.edit?.parentId||""}set parentId(t){this.edit&&(this.edit.parentId=t||void 0)}get parentLocation(){return this.edit?.parentLocation||""}set parentLocation(t){this.edit&&(this.edit.parentLocation=t)}get type(){return this.edit?.type??l.j.Undefined}set type(t){this.edit&&(this.edit.type=t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.J))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-container-form"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"actions"],[1,"ui","button",3,"ngClass","click"],[1,"ui","primary","button",3,"ngClass","click"],["class","ui negative button",3,"click",4,"ngIf"],[1,"ui","form",3,"ngClass"],[1,"field",3,"ngClass"],["hint","(keine)",3,"items","selected","selectedChange"],[3,"list"],[1,"required","field",3,"ngClass"],[1,"ui","input"],["type","text",3,"ngModel","ngModelChange"],[3,"selected","selectedChange"],["rows","5",3,"ngModel","ngModelChange"],["class","ui celled collapsing fixed sortable striped unstackable compact table contents",4,"ngIf"],[3,"show","closed","confirm"],[1,"ui","negative","button",3,"click"],[1,"ui","celled","collapsing","fixed","sortable","striped","unstackable","compact","table","contents"],[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"],[2,"text-align","center"]],template:function(t,i){1&t&&e.YNc(0,Q,42,38,"div",0),2&t&&e.Q6J("ngIf",i.edit)},dependencies:[p.rH,d.mk,d.sg,d.O5,Z.u,m.Fj,m.JJ,m.On,T.z,J.H,b],styles:["[_nghost-%COMP%]{width:100%;height:100%;padding-right:.5em;overflow:auto}"]}),n})();var L=c(3771);const E=function(n){return["/containers",n]};let k=(()=>{class n{constructor(){this.container=void 0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-container-item"]],inputs:{container:"container"},decls:4,vars:5,consts:[[1,"item",3,"routerLink"],[3,"type"],[1,"content"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-container-icon",1),e.TgZ(2,"div",2),e._uU(3),e.qZA()()),2&t&&(e.Q6J("routerLink",e.VKq(3,E,i.container._id)),e.xp6(1),e.Q6J("type",i.container.type),e.xp6(2),e.Oqu(i.container.name))},dependencies:[p.rH,h],styles:["[_nghost-%COMP%]{overflow:hidden}.item[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;align-items:center;overflow:hidden}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"]}),n})();const N=function(n){return{active:n}};function P(n,s){if(1&n&&e._UZ(0,"app-container-item",4),2&n){const t=s.$implicit,i=e.oxw();e.Akn("margin-left: "+t.level+"em"),e.Q6J("ngClass",e.VKq(4,N,t._id===i.selected))("container",t)}}let K=(()=>{class n{constructor(t){this._service=t,this.selected="",this.items=[],this.map={},this.all=[],this._filter=""}ngOnInit(){this._query=this._service.map.subscribe(t=>{const i=Object.keys(t).map(a=>t[a]).filter(a=>!a.parentId||!t[a.parentId]);i.sort((a,v)=>(a.name||a._id).toLocaleLowerCase().localeCompare((v.name||v._id).toLocaleLowerCase()));const o=[],r=a=>{o.push(a),a.children?.forEach(r)};i.forEach(r),this.all=o,this.map=t,this.refreshFilter()})}get filter(){return this._filter}set filter(t){this._filter=t,this.refreshFilter()}refreshFilter(){const t=(this._filter||"").toLocaleLowerCase(),i=new Set(this.all.filter(o=>!t||(o.fullName||o.name||o._id).toLocaleLowerCase().indexOf(t)>=0).map(o=>o._id));for(let o of Array.from(i))for(;;){const r=this.map[o];if(!r)break;i.add(o),o=r.parentId||""}this.items=this.all.filter(o=>i.has(o._id))}ngOnDestroy(){this._query?.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.J))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-container-list"]],inputs:{selected:"selected"},decls:4,vars:3,consts:[[1,"complete"],["hint","Suche...",3,"text","clearable","textChange"],[1,"ui","selection","list"],["class","item",3,"ngClass","container","style",4,"ngFor","ngForOf"],[1,"item",3,"ngClass","container"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"semantic-search",1),e.NdJ("textChange",function(r){return i.filter=r}),e.qZA(),e.TgZ(2,"div",2),e.YNc(3,P,1,6,"app-container-item",3),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("text",i.filter)("clearable",!0),e.xp6(2),e.Q6J("ngForOf",i.items))},dependencies:[d.mk,d.sg,L.g,k],styles:["[_nghost-%COMP%]{width:100%;height:100%;overflow:auto}.complete[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto 1fr;height:100%;overflow:hidden}.complete[_ngcontent-%COMP%] > .ui.list[_ngcontent-%COMP%]{row-gap:10em;padding:.5em;overflow:auto;background:#ffffff}.complete[_ngcontent-%COMP%] > .ui.list[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%] + .item[_ngcontent-%COMP%]{margin-top:.5em}.complete[_ngcontent-%COMP%] > .ui.list[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]:not(.active):not(:hover){color:#666;background:#dddddd}"]}),n})(),f=(()=>{class n{constructor(t){this._route=t,this.selected=""}ngOnInit(){this._query=this._route.params.subscribe(t=>this.selected=t.id)}ngOnDestroy(){this._query?.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-container"]],decls:3,vars:2,consts:[[1,"page"],["list","",3,"selected"],["detail","",3,"selected"]],template:function(t,i){1&t&&(e.TgZ(0,"app-master-detail",0),e._UZ(1,"app-container-list",1)(2,"app-container-form",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("selected",i.selected),e.xp6(1),e.Q6J("selected",i.selected))},dependencies:[x.B,q,K],styles:["[_nghost-%COMP%]{width:100%;height:100%;overflow:hidden}.page[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}"]}),n})();const D=[{component:f,path:"",pathMatch:"full"},{component:f,path:":id"}];let S=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.Bz.forChild(D),p.Bz]}),n})();var V=c(1075);let j=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[S,d.ez,V.m,p.Bz,m.u5]}),n})()}}]);