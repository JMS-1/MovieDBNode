{"version":3,"sources":["../src/database/index.ts"],"names":[],"mappings":";;AAAA,2CAAiD;AACjD,mCAAyC;AACzC,yCAA+C;AAC/C,qCAAyC;AACzC,qCAA2C;AAC3C,mCAAmC;AACnC,6CAAwC;AAEjC,KAAK,UAAU,kBAAkB;IACpC,MAAM,EAAE,GAAG,MAAM,iBAAS,EAAE,CAAA;IAE5B,MAAM,WAAW,GAAG,CAAC,+BAAmB,EAAE,yBAAgB,EAAE,uBAAe,EAAE,6BAAkB,CAAC,CAAA;IAEhG,KAAK,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,WAAW,EAAE;QAEtC,sBAAS,CAAC,MAAM,CAAC,CAAA;QAGjB,MAAM,EAAE,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAA;QAG/B,MAAM,EAAE,CAAC,OAAO,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,SAAS,EAAE,EAAE,WAAW,EAAE,uBAAc,CAAC,MAAM,CAAC,EAAE,EAAE,CAAC,CAAA;KAC1F;AACL,CAAC;AAfD,gDAeC","file":"index.js","sourcesContent":["import { containerCollection } from './container'\nimport { genreCollection } from './genre'\nimport { languageCollection } from './language'\nimport { convertToMongo } from './schema'\nimport { seriesCollection } from './series'\nimport { dbConnect } from './utils'\nimport { addSchema } from './validation'\n\nexport async function initializeDatabase(): Promise<void> {\n    const db = await dbConnect()\n\n    const collections = [containerCollection, seriesCollection, genreCollection, languageCollection]\n\n    for (let { schema, name } of collections) {\n        // Interne Prüfumgebung initialisieren.\n        addSchema(schema)\n\n        // Eventuell die Tabelle erstmalig anlegen.\n        await db.createCollection(name)\n\n        // Immer die Prüfregeln in der Datenbank auf den neuesten Stand bringen.\n        await db.command({ collMod: name, validator: { $jsonSchema: convertToMongo(schema) } })\n    }\n}\n"],"sourceRoot":"/home/jochenmanns/Software/git/MovieDBNode/Server/build"}