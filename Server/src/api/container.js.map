{"version":3,"sources":["api/container.ts"],"names":[],"mappings":";;AAAA,qCAAgC;AAIhC,mCAA2C;AAE3C,qDAAiF;AAEpE,QAAA,YAAY,GAAG,gBAAM,EAAE,CAAC,GAAG,CACpC,YAAY,EACZ,gBAAM,EAAE;KACH,GAAG,CAAC,GAAG,EAAE,CAAC,OAAO,EAAE,QAAQ,EAAE,IAAI,EAAE,EAAE,CAClC,yBAAiB,CACb,KAAK,IAAI,EAAE;IACP,MAAM,UAAU,GAAG,MAAM,+BAAmB,CAAC,IAAI,EAAE,CAAA;IAEnD,OAA2B;QACvB,UAAU,EAAE,UAAU,CAAC,GAAG,CAAC,sBAAU,CAAC;KACzC,CAAA;AACL,CAAC,EACD,OAAO,EACP,QAAQ,CACX,CACJ;KACA,GAAG,CAAC,MAAM,EAAE,CAAC,OAAO,EAAE,QAAQ,EAAE,IAAI,EAAE,EAAE,CACrC,yBAAiB,CACb,KAAK,EAAE,GAAkB,EAAE,EAAE;IACzB,MAAM,SAAS,GAAG,oBAAQ,CAAC,GAAG,EAAE,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,CAAA;IAElD,OAAiC;QAC7B,SAAS,EAAE,sBAAU,CAAC,SAAS,CAAC;QAChC,MAAM,EAAE,MAAM,+BAAmB,CAAC,iBAAiB,CAAC,SAAS,CAAC;KACjE,CAAA;AACL,CAAC,EACD,OAAO,EACP,QAAQ,CACX,CACJ,CACR,CAAA","file":"container.js","sourcesContent":["import { Router } from 'express'\n\nimport { IContainerResponse, INewContainer, IUpdateContainerResponse } from 'movie-db-api'\n\nimport { processApiRequest } from './utils'\n\nimport { containerCollection, toEntity, toProtocol } from '../database/container'\n\nexport const containerApi = Router().use(\n    '/container',\n    Router()\n        .get('/', (request, response, next) =>\n            processApiRequest(\n                async () => {\n                    const containers = await containerCollection.find()\n\n                    return <IContainerResponse>{\n                        containers: containers.map(toProtocol),\n                    }\n                },\n                request,\n                response\n            )\n        )\n        .put('/:id', (request, response, next) =>\n            processApiRequest(\n                async (req: INewContainer) => {\n                    const container = toEntity(req, request.params.id)\n\n                    return <IUpdateContainerResponse>{\n                        container: toProtocol(container),\n                        errors: await containerCollection.findOneAndReplace(container),\n                    }\n                },\n                request,\n                response\n            )\n        )\n)\n"],"sourceRoot":"/home/jochenmanns/Software/git/MovieDBNode/Server/src"}