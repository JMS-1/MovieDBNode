{"version":3,"sources":["database/index.ts"],"names":[],"mappings":";;AAAA,2CAAiD;AACjD,mCAAyC;AACzC,yCAA+C;AAC/C,mCAAyC;AACzC,2CAAiD;AACjD,qCAAyC;AACzC,qCAA2C;AAC3C,mCAAmC;AACnC,6CAAwC;AAEjC,KAAK,UAAU,kBAAkB;IACpC,MAAM,WAAW,GAAG;QAChB,+BAAmB;QACnB,uBAAe;QACf,6BAAkB;QAClB,uBAAe;QACf,+BAAmB;QACnB,yBAAgB;KACnB,CAAA;IAED,MAAM,EAAE,GAAG,MAAM,iBAAS,EAAE,CAAA;IAE5B,KAAK,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,WAAW,EAAE;QAEtC,sBAAS,CAAC,MAAM,CAAC,CAAA;QAGjB,MAAM,EAAE,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAA;QAG/B,MAAM,EAAE,CAAC,OAAO,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,SAAS,EAAE,EAAE,WAAW,EAAE,uBAAc,CAAC,MAAM,CAAC,EAAE,EAAE,CAAC,CAAA;KAC1F;AACL,CAAC;AAtBD,gDAsBC","file":"index.js","sourcesContent":["import { containerCollection } from './container'\nimport { genreCollection } from './genre'\nimport { languageCollection } from './language'\nimport { mediaCollection } from './media'\nimport { recordingCollection } from './recording'\nimport { convertToMongo } from './schema'\nimport { seriesCollection } from './series'\nimport { dbConnect } from './utils'\nimport { addSchema } from './validation'\n\nexport async function initializeDatabase(): Promise<void> {\n    const collections = [\n        containerCollection,\n        genreCollection,\n        languageCollection,\n        mediaCollection,\n        recordingCollection,\n        seriesCollection,\n    ]\n\n    const db = await dbConnect()\n\n    for (let { schema, name } of collections) {\n        // Interne Prüfumgebung initialisieren.\n        addSchema(schema)\n\n        // Eventuell die Tabelle erstmalig anlegen.\n        await db.createCollection(name)\n\n        // Immer die Prüfregeln in der Datenbank auf den neuesten Stand bringen.\n        await db.command({ collMod: name, validator: { $jsonSchema: convertToMongo(schema) } })\n    }\n}\n"],"sourceRoot":"/home/jochenmanns/Software/git/MovieDBNode/Server/src"}