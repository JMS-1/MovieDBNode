{"version":3,"file":"recording.js","sourceRoot":"","sources":["recording.ts"],"names":[],"mappings":";;AAAA,mCAA2C;AAE9B,QAAA,cAAc,GAAG,YAAY,CAAA;AAqB7B,QAAA,UAAU,GAAG;IACtB,OAAO,EAAE,gCAAgC;IACzC,GAAG,EAAE,yDAAyD;IAC9D,oBAAoB,EAAE,KAAK;IAC3B,IAAI,EAAE,QAAQ;IACd,OAAO,EAAE,uBAAuB;IAChC,UAAU,EAAE;QACR,GAAG,EAAE;YACD,OAAO,EAAE,4CAA4C;YACrD,OAAO,EAAE,gBAAQ;YACjB,IAAI,EAAE,QAAQ;SACjB;QACD,WAAW,EAAE;YACT,SAAS,EAAE,IAAI;YACf,OAAO,EAAE,0BAA0B;YACnC,IAAI,EAAE,QAAQ;SACjB;QACD,GAAG,EAAE;YACD,OAAO,EAAE,8CAA8C;YACvD,OAAO,EAAE,gBAAQ;YACjB,IAAI,EAAE,QAAQ;SACjB;QACD,IAAI,EAAE;YACF,SAAS,EAAE,GAAG;YACd,OAAO,EAAE,mCAAmC;YAC5C,SAAS,EAAE,CAAC;YACZ,IAAI,EAAE,QAAQ;SACjB;QACD,OAAO,EAAE;YACL,OAAO,EAAE,mCAAmC;YAC5C,OAAO,EAAE,CAAC;YACV,IAAI,EAAE,SAAS;SAClB;QACD,GAAG,EAAE;YACD,SAAS,EAAE,IAAI;YACf,OAAO,EAAE,qBAAqB;YAC9B,IAAI,EAAE,QAAQ;SACjB;KACJ;IACD,QAAQ,EAAE,CAAC,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,SAAS,CAAC;CACrD,CAAA;AAEY,QAAA,eAAe,GAAG;IAC3B,OAAO,EAAE,gCAAgC;IACzC,GAAG,EAAE,sDAAsD;IAC3D,oBAAoB,EAAE,KAAK;IAC3B,IAAI,EAAE,QAAQ;IACd,OAAO,EAAE,4BAA4B;IACrC,UAAU,EAAE;QACR,GAAG,EAAE;YACD,OAAO,EAAE,4CAA4C;YACrD,OAAO,EAAE,gBAAQ;YACjB,IAAI,EAAE,QAAQ;SACjB;QACD,OAAO,EAAE;YACL,OAAO,EAAE,mCAAmC;YAC5C,OAAO,EAAE,eAAO;YAChB,IAAI,EAAE,QAAQ;SACjB;QACD,WAAW,EAAE;YACT,SAAS,EAAE,IAAI;YACf,OAAO,EAAE,0BAA0B;YACnC,IAAI,EAAE,QAAQ;SACjB;QACD,MAAM,EAAE;YACJ,KAAK,EAAE;gBACH,OAAO,EAAE,oBAAoB;gBAC7B,OAAO,EAAE,gBAAQ;gBACjB,IAAI,EAAE,QAAQ;aACjB;YACD,OAAO,EAAE,sBAAsB;YAC/B,IAAI,EAAE,OAAO;YACb,WAAW,EAAE,IAAI;SACpB;QACD,SAAS,EAAE;YACP,KAAK,EAAE,EAAE,OAAO,EAAE,sBAAsB,EAAE,OAAO,EAAE,gBAAQ,EAAE,IAAI,EAAE,QAAQ,EAAE;YAC7E,OAAO,EAAE,wBAAwB;YACjC,IAAI,EAAE,OAAO;YACb,WAAW,EAAE,IAAI;SACpB;QACD,KAAK,EAAE;YACH,OAAO,EAAE,wBAAwB;YACjC,IAAI,EAAE,OAAO;YACb,KAAK,EAAE;gBACH,IAAI,EAAE,kBAAU,CAAC,IAAI;gBACrB,OAAO,EAAE,kBAAU,CAAC,OAAO;gBAC3B,UAAU,EAAE;oBACR,WAAW,EAAE,kBAAU,CAAC,UAAU,CAAC,WAAW;oBAC9C,IAAI,EAAE,kBAAU,CAAC,UAAU,CAAC,IAAI;oBAChC,GAAG,EAAE,kBAAU,CAAC,UAAU,CAAC,GAAG;iBACjC;gBACD,QAAQ,EAAE,CAAC,MAAM,EAAE,KAAK,CAAC;aAC5B;SACJ;QACD,KAAK,EAAE;YACH,OAAO,EAAE,gCAAgC;YACzC,OAAO,EAAE,gBAAQ;YACjB,IAAI,EAAE,QAAQ;SACjB;QACD,IAAI,EAAE;YACF,SAAS,EAAE,GAAG;YACd,OAAO,EAAE,mCAAmC;YAC5C,SAAS,EAAE,CAAC;YACZ,IAAI,EAAE,QAAQ;SACjB;QACD,MAAM,EAAE;YACJ,SAAS,EAAE,GAAG;YACd,OAAO,EAAE,mBAAmB;YAC5B,IAAI,EAAE,QAAQ;SACjB;QACD,MAAM,EAAE;YACJ,OAAO,EAAE,oBAAoB;YAC7B,OAAO,EAAE,gBAAQ;YACjB,IAAI,EAAE,QAAQ;SACjB;KACJ;IACD,QAAQ,EAAE,CAAC,KAAK,EAAE,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,QAAQ,EAAE,WAAW,EAAE,OAAO,CAAC;CAChF,CAAA","sourcesContent":["import { isoDate, uniqueId } from './utils'\n\nexport const collectionName = 'recordings'\n\nexport interface IDbLink {\n    description?: string\n    name: string\n    url: string\n}\n\nexport interface IDbRecording {\n    _id: string\n    created: string\n    description?: string\n    genres: string[]\n    languages: string[]\n    links: IDbLink[]\n    media: string\n    name: string\n    rentTo?: string\n    series?: string\n}\n\nexport const LinkSchema = {\n    $schema: 'http://json-schema.org/schema#',\n    $id: 'http://psimarron.net/schemas/movie-db/migrate/link.json',\n    additionalProperties: false,\n    type: 'object',\n    message: 'Verweis unvollständig',\n    properties: {\n        _id: {\n            message: 'Eindeutige Kennung fehlt oder ist ungültig',\n            pattern: uniqueId,\n            type: 'string',\n        },\n        description: {\n            maxLength: 2000,\n            message: 'Beschreibung ist zu lang',\n            type: 'string',\n        },\n        for: {\n            message: 'Aufzeichnungskennung fehlt oder ist ungültig',\n            pattern: uniqueId,\n            type: 'string',\n        },\n        name: {\n            maxLength: 100,\n            message: 'Name nicht angegeben oder zu lang',\n            minLength: 1,\n            type: 'string',\n        },\n        ordinal: {\n            message: 'Anordnung fehlt oder ist ungültig',\n            minimum: 0,\n            type: 'integer',\n        },\n        url: {\n            maxLength: 2000,\n            message: 'Verweis ist zu lang',\n            type: 'string',\n        },\n    },\n    required: ['_id', 'name', 'for', 'url', 'ordinal'],\n}\n\nexport const RecordingSchema = {\n    $schema: 'http://json-schema.org/schema#',\n    $id: 'http://psimarron.net/schemas/movie-db/recording.json',\n    additionalProperties: false,\n    type: 'object',\n    message: 'Aufzeichnung unvollständig',\n    properties: {\n        _id: {\n            message: 'Eindeutige Kennung fehlt oder ist ungültig',\n            pattern: uniqueId,\n            type: 'string',\n        },\n        created: {\n            message: 'Zeitpunkt fehlt oder ist ungültig',\n            pattern: isoDate,\n            type: 'string',\n        },\n        description: {\n            maxLength: 2000,\n            message: 'Beschreibung ist zu lang',\n            type: 'string',\n        },\n        genres: {\n            items: {\n                message: 'Genre ist ungültig',\n                pattern: uniqueId,\n                type: 'string',\n            },\n            message: 'Genres sind ungültig',\n            type: 'array',\n            uniqueItems: true,\n        },\n        languages: {\n            items: { message: 'Sprache ist ungültig', pattern: uniqueId, type: 'string' },\n            message: 'Sprachen sind ungültig',\n            type: 'array',\n            uniqueItems: true,\n        },\n        links: {\n            message: 'Verweise sind ungültig',\n            type: 'array',\n            items: {\n                type: LinkSchema.type,\n                message: LinkSchema.message,\n                properties: {\n                    description: LinkSchema.properties.description,\n                    name: LinkSchema.properties.name,\n                    url: LinkSchema.properties.url,\n                },\n                required: ['name', 'url'],\n            },\n        },\n        media: {\n            message: 'Medium fehlt oder ist ungültig',\n            pattern: uniqueId,\n            type: 'string',\n        },\n        name: {\n            maxLength: 200,\n            message: 'Name nicht angegeben oder zu lang',\n            minLength: 1,\n            type: 'string',\n        },\n        rentTo: {\n            maxLength: 200,\n            message: 'Verleiher zu lang',\n            type: 'string',\n        },\n        series: {\n            message: 'Serie ist ungültig',\n            pattern: uniqueId,\n            type: 'string',\n        },\n    },\n    required: ['_id', 'name', 'created', 'media', 'genres', 'languages', 'links'],\n}\n"]}